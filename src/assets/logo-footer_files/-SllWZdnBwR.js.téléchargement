if (self.CavalryLogger) { CavalryLogger.start_js(["nAHfY"]); }

__d("DetectBrokenProxyCache",["AsyncSignal","Cookie","URI"],(function(a,b,c,d,e,f){var g;function a(a,c){var d=b("Cookie").get(c);if(d!=a&&d!=null&&a!="0"){c={c:"si_detect_broken_proxy_cache",m:c+" "+a+" "+d};a=new(g||(g=b("URI")))("/common/scribe_endpoint.php").getQualifiedURI().toString();new(b("AsyncSignal"))(a,c).send()}}e.exports={run:a}}),null);
__d("CometRouteActorToasterQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"scale"}],b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:"toast_icon",args:[{kind:"Literal",name:"height",value:32},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometRouteActorToasterQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[b,c,d],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometRouteActorToasterQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[b,c,d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3249375815143859",metadata:{},name:"CometRouteActorToasterQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PresenceStatusProviderSubscriptionComponentQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"scale"}],b={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"buddy_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PresenceStatusProviderSubscriptionComponentQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatSidebarRankedContact",kind:"LinkedField",name:"chat_sidebar_contact_rankings",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"PresenceStatusProviderSubscription_rankings",selections:[b,c,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"MWChatContact_profile"}],storageKey:null}]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PresenceStatusProviderSubscriptionComponentQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatSidebarRankedContact",kind:"LinkedField",name:"chat_sidebar_contact_rankings",plural:!0,selections:[b,c,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:36},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_active_time",storageKey:null}]}],type:"User",abstractKey:null}],type:"Profile",abstractKey:"__isProfile"}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3061548450534867",metadata:{},name:"PresenceStatusProviderSubscriptionComponentQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("PresenceStatusProviderSubscription_ContactProfilesQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"ids"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"ids",variableName:"ids"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},e={alias:null,args:[{kind:"Literal",name:"height",value:36},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PresenceStatusProviderSubscription_ContactProfilesQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"chat_sidebar_contact_nodes",plural:!0,selections:[c,d,e],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PresenceStatusProviderSubscription_ContactProfilesQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"chat_sidebar_contact_nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{kind:"TypeDiscriminator",abstractKey:"__isProfile"},d,e],storageKey:null}],storageKey:null}]},params:{id:"4537685766302958",metadata:{},name:"PresenceStatusProviderSubscription_ContactProfilesQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PresenceStatusProviderSubscription_PresenceStatusChatVisibilityQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"has_converted_to_view_side_settings",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PresenceStatusProviderSubscription_PresenceStatusChatVisibilityQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[b],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PresenceStatusProviderSubscription_PresenceStatusChatVisibilityQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"2607318959337318",metadata:{},name:"PresenceStatusProviderSubscription_PresenceStatusChatVisibilityQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PresenceStatusProviderSubscription_rankings.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"PresenceStatusProviderSubscription_rankings"};e.exports=a}),null);
__d("RTWebCallBlockSettingHooksQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"call_blocked_until",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RTWebCallBlockSettingHooksQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"RTWebCallBlockSettingHooksQuery",selections:a},params:{id:"2591667614255718",metadata:{},name:"RTWebCallBlockSettingHooksQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("RTWebCometRoomIncomingCallDialog_DisclaimerQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3161478997284719",metadata:{},name:"RTWebCometRoomIncomingCallDialog_DisclaimerQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork_LogMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FleetBeaconLogResponsePayload",kind:"LinkedField",name:"fleet_beacon_log",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FleetBeaconSubscriptionNetwork_LogMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FleetBeaconSubscriptionNetwork_LogMutation",selections:b},params:{id:"3531482613593478",metadata:{},name:"FleetBeaconSubscriptionNetwork_LogMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork_PublishMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FleetBeaconPublishResponsePayload",kind:"LinkedField",name:"fleet_beacon_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FleetBeaconSubscriptionNetwork_PublishMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FleetBeaconSubscriptionNetwork_PublishMutation",selections:b},params:{id:"3253299374687488",metadata:{},name:"FleetBeaconSubscriptionNetwork_PublishMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork_Subscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"TestFleetBeaconSubscribeResponsePayload",kind:"LinkedField",name:"test_fleet_beacon_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_subscription_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"test_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FleetBeaconSubscriptionNetwork_Subscription",selections:b,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FleetBeaconSubscriptionNetwork_Subscription",selections:b},params:{id:"3194829573871785",metadata:{subscriptionName:"test_fleet_beacon_subscribe"},name:"FleetBeaconSubscriptionNetwork_Subscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("CometVirtualCursorStatus",["requireCond","cr:1345969","UserAgent","setTimeout"],(function(a,b,c,d,e,f){"use strict";f.initLogging=d;var g=b("cr:1345969").log,h=null,i=null;function j(){i||(i=window.addEventListener("blur",function(){h=null,k()}))}function k(){i&&(i.remove(),i=null)}function a(a){h=a.keyCode,j()}function c(a){h=null,k()}if(typeof window!=="undefined"&&window.document&&window.document.createElement){e=document.documentElement;if(e)if(e.addEventListener)e.addEventListener("keydown",a,!0),e.addEventListener("keyup",c,!0);else if(e.attachEvent){f=e.attachEvent;f("onkeydown",a);f("onkeyup",c)}}var l={getKeyDownCode:function(){return h},isKeyDown:function(){return!!h}},m=!1,n=!1,o=null,p=!1;function q(a){var c=new Set(),d=l.isKeyDown(),e=a.WEBKIT_FORCE_AT_MOUSE_DOWN,f=a.clientX,g=a.clientY,h=a.isTrusted,i=a.mozInputSource,j=a.offsetX,k=a.offsetY,o=a.webkitForce;f===0&&g===0&&j>=0&&k>=0&&n&&h&&i==null&&c.add("Chrome");m&&n&&!d&&o!=null&&o<e&&j===0&&k===0&&i==null&&c.add("Safari-edge");f===0&&g===0&&j<0&&k<0&&n&&i==null&&c.add("Safari-old");if(!m&&!n&&!d&&h&&b("UserAgent").isBrowser("IE >= 10")&&i==null){o=a.target;e=o.clientHeight;d=o.clientWidth;f<0&&g<0?c.add("IE"):(j<0||j>d)&&(k<0||k>e)&&c.add("MSIE")}i===0&&h&&c.add("Firefox");return c}function r(){m=!0,b("setTimeout")(function(){m=!1},0)}function s(){n=!0,b("setTimeout")(function(){n=!1},0)}function t(a){p&&g({extra_data:{source_app:"comet"},indicated_browsers:o,is_virtual_cursor_action:a})}function u(a){o===null&&(o=Array.from(q(a)));p=o!=null&&o.length>0;a=a.target!=null&&a.target.getAttribute!=null&&a.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";t(a);b("setTimeout")(function(){p=!1,o=null},0)}function d(){document.addEventListener("click",u,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("mouseup",s,!0)}}),null);
__d("CometBootloaderEventsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometBootloaderEventsLoggerConfig")}),null);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1823926");c=b("FalcoLoggerInternal").create("haste_response",a);e.exports=c}),null);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsTypedLoggerLite","CometTimeSpentNavigation","HasteResponseFalcoEvent","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";f.initLogging=a;var g=!1;function a(a){var c=a.bl_sample_rate,d=a.hr_sample_rate,e=a.parent_lid;if(g||!(c||d))return;g=!0;var f=function(a){return{ms_since_navstart:Math.round(a-b("performanceNavigationStart")()),parent_lid:e,pkg_cohort:b("SiteData").pkg_cohort,request_path:(a=b("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:b("SiteData").client_revision}};d&&b("BootloaderEvents").onHasteResponse(function(a){return b("HasteResponseFalcoEvent").log(function(){var c=b("BootloaderEventsPerf").computeHRData(a),d=b("BootloaderEventsPerf").flattenData(c);return babelHelpers["extends"]({},d,f(c.start_time))})});c&&b("BootloaderEvents").onBootload(function(a){a=b("BootloaderEventsPerf").computeBLData(a);var d=b("BootloaderEventsPerf").flattenData(a);b("CometBootloaderEventsTypedLoggerLite").log(babelHelpers["extends"]({},d,f(a.start_time)),{weight:c})})}}),null);
__d("CometIconWirelessSlashFilled.react",["CometSVGIcon.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){return g.jsx(b("CometSVGIcon.react"),babelHelpers["extends"]({viewBox:"0 0 24 24"},a,{children:g.jsx("path",{d:"M23.7805.2195c.2925.293.2925.768 0 1.061l-22.5 22.5C1.134 23.927.942 24 .75 24c-.192 0-.384-.073-.5305-.2195-.2925-.293-.2925-.768 0-1.061l12.1967947-12.1971509c-2.3773758-.1150468-4.79162015.7286756-6.6038447 2.5401009-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.024 0-1.414 2.65728981-2.65728981 6.3696459-3.62280965 9.8005664-2.90852144l2.430738-2.43186193C11.7816792 4.58111626 6.15198938 5.65271062 2.27735 9.52735c-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.0235 0-1.414 4.6714534-4.67191574 11.571522-5.78608437 17.3096457-3.34843552L22.7195.2195c.293-.2925.768-.2925 1.061 0zM12 18.5c.6905 0 1.25.5595 1.25 1.25S12.6905 21 12 21s-1.25-.5595-1.25-1.25.5595-1.25 1.25-1.25zm1.4175-4.81495c.9705.2455 1.8905.741 2.6485 1.499.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.512-.0975-.707-.293-.7835333-.7835333-1.8301422-1.1445778-2.8581093-1.0880116L11.574 15.52855l1.8435-1.8435zm3.8154-3.8154c.848.4725 1.649 1.059 2.3685 1.779.391.39.391 1.023 0 1.414-.195.195-.451.293-.707.293-.2555 0-.5115-.098-.707-.293-.7285-.728-1.5575-1.291-2.439-1.7085zm2.1908-2.1908l1.4425-1.4425c.8.545 1.5615 1.168 2.2705 1.877.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.5115-.0975-.707-.293-.5933333-.59333333-1.2283333-1.11861111-1.895162-1.57959491L19.4237 7.67885l1.4425-1.4425z"})}))}}),null);
__d("CometNetworkStatusToast",["ix","fbt","CometIconWirelessSlashFilled.react","CometRelayEnvironmentFactory","CometToasterStateManager","NetworkStatus","React","TetraIcon.react","cometPushToast","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";f.subscribe=a;var i=b("React"),j=null;function k(a){a=a.online;var c=b("CometToasterStateManager").getInstance();j!=null&&(c.expire(j),j=null);j=a?b("cometPushToast").cometPushToast({icon:i.jsx(b("TetraIcon.react"),{color:"positive",icon:b("fbicon")._(g("485124"),24)}),message:h._("Votre connexion Internet a \u00e9t\u00e9 restaur\u00e9e.")},4e3,c):b("cometPushToast").cometPushToast({action:{label:h._("Actualiser"),onPress:function(){b("CometRelayEnvironmentFactory").commitLocalUpdateForEachEnvironment(function(a,b,c){c.invalidateStore()})}},icon:i.jsx(b("TetraIcon.react"),{color:"disabled",icon:b("CometIconWirelessSlashFilled.react"),size:24}),message:h._("Vous \u00eates actuellement hors ligne.")},Infinity,c)}function a(){b("NetworkStatus").onChange(k)}}),null);
__d("SimplePageLoadLogger",["ODS","performance"],(function(a,b,c,d,e,f){"use strict";f.logPageNavigationType=a;var g;function a(){b("ODS").bumpEntityKey(1678,"www_client_navigations",h())}function h(){if((g||(g=b("performance"))).navigation==null||(g||(g=b("performance"))).navigation.type==null)return"UNSUPPORTED";switch((g||(g=b("performance"))).navigation.type){case(g||(g=b("performance"))).navigation.TYPE_NAVIGATE:return"NAVIGATE";case(g||(g=b("performance"))).navigation.TYPE_RELOAD:return"RELOAD";case(g||(g=b("performance"))).navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case(g||(g=b("performance"))).navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}}),null);
__d("CometRootDeferredShared",["CometBootloaderLoggerUtil","requireCond","CometErrorRoot.react","CometFullPageCompatRoot.react","CometVirtualCursorStatus","CometVCTracker","DeferredCookie","DetectBrokenProxyCache","ErrorGuard","JSScheduler","cr:1201738","cr:1813330","CometNetworkStatusToast","SimplePageLoadLogger","WebStorageMonster","cr:1332233","cr:1516609","cr:1632385"],(function(a,b,c,d,e,f){"use strict";f.initDeferred=a;var g;b("CometErrorRoot.react");b("CometFullPageCompatRoot.react");var h=b("CometVCTracker").VisualCompletionTraceObserver;function a(a){var c=a.blLoggingCavalryFields,d=a.deferredCookies,e=a.userID;b("cr:1632385")!=null&&(g||(g=b("ErrorGuard"))).applyWithGuard(function(){return b("cr:1632385").init()},null,[]);(g||(g=b("ErrorGuard"))).applyWithGuard(function(){return b("CometBootloaderLoggerUtil").initLogging(c)},null,[]);g.applyWithGuard(function(){return b("CometVirtualCursorStatus").initLogging()},null,[]);g.applyWithGuard(function(){return b("CometNetworkStatusToast").subscribe()},null,[]);g.applyWithGuard(function(){return b("SimplePageLoadLogger").logPageNavigationType()},null,[]);b("JSScheduler").scheduleSpeculativeCallback(function(){b("WebStorageMonster").schedule()});b("JSScheduler").scheduleSpeculativeCallback(function(){b("DetectBrokenProxyCache").run(e,"c_user")});b("cr:1201738")&&h.subscribe(function(a){a.interactionType==="INITIAL_LOAD"&&b("cr:1201738").init()});Object.keys(d).forEach(function(a){var c=d[a],e=c.expiration_for_js,f=c.first_party_only,g=c.path,h=c.secure;c=c.value;b("DeferredCookie").addToQueue(a,c,e,g,f,!1,h)});b("cr:1332233")&&(g||(g=b("ErrorGuard"))).applyWithGuard(function(){return b("cr:1332233")()},null,[]);b("cr:1516609")!=null&&(g||(g=b("ErrorGuard"))).applyWithGuard(function(){return b("cr:1516609").initSignalCollection()},null,[]);b("cr:1813330")&&(g||(g=b("ErrorGuard"))).applyWithGuard(function(){return b("cr:1813330").init()},null,[])}}),null);
__d("CometRootMessengerDeferred",["CometRootDeferredShared"],(function(a,b,c,d,e,f){"use strict";f.initDeferred=a;function a(a){b("CometRootDeferredShared").initDeferred(a)}}),null);
__d("CometOnBeforeUnloadDialog.react",["fbt","CometCardedDialog.react","CometTrackingNodeProvider.react","React","TetraButtonGroup.react","TetraText.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.body,d=a.cancel,e=a.confirm,f=a.disabled;f=f===void 0?!1:f;var i=a.onClose,j=a.onCloseButtonPress,k=a.primaryAction,l=a.secondaryAction;a=a.title;var m=function(){k(),i()},n=function(){l(),i()};return h.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:163,children:h.jsxs(b("CometCardedDialog.react"),{onClose:function(){j(),i()},testid:void 0,title:a,titleHorizontalAlignment:"start",withCloseButton:!0,children:[h.jsx("div",{className:"l9j0dhe7 dati1w0a f10w8fjw hv4rvrfc pybr56ya",children:h.jsx(b("TetraText.react"),{type:"body3",children:c})}),h.jsx("div",{className:"a8nywdso ihqw7lf3 rz4wbd8a jb3vyjys bkfpd7mw btwxx1t3 j83agx80",children:h.jsx(b("TetraButtonGroup.react"),{direction:"backward",paddingHorizontal:16,primary:{disabled:f,label:(a=e)!=null?a:g._("Confirmer"),onPress:m,testid:"CometOnBeforeUnloadDialogConfirmButton"},secondary:{disabled:f,label:(c=d)!=null?c:g._("Annuler"),onPress:n,reduceEmphasis:!0,testid:"CometOnBeforeUnloadDialogCancelButton"}})})]})})}}),null);
__d("CometRouteActorToaster.react",["fbt","Actor","CometRelay","CometRouteActorToasterBlocklist","React","TetraProfilePhoto.react","TetraText.react","WebPixelRatio","cometPushToast","getTopMostRoute","promiseDone","requireDeferred","useCometRouterState","useCurrentRoute","useRouteReferrer","CometRouteActorToasterQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j=b("requireDeferred")("AcfToastImpressionFalcoEvent");function k(a,c){if(c)return i.jsx(b("TetraText.react"),{color:"primary",type:"body3",children:g._("Vous interagissez actuellement en tant que {=your profile}",[g._param("=your profile",i.jsx(b("TetraText.react"),{type:"bodyLink3",children:g._("votre profil")}))])});else return i.jsx(b("TetraText.react"),{color:"primary",type:"body3",children:g._("Vous interagissez actuellement en tant que {actor}",[g._param("actor",i.jsx(b("TetraText.react"),{type:"bodyLink3",children:a}))])})}var l=h!==void 0?h:h=b("CometRouteActorToasterQuery.graphql");function a(){var a=b("CometRelay").useRelayEnvironment(),c=b("Actor").useActor(),d=c[0];c=b("useCometRouterState")();var e=b("useCurrentRoute")(),f=b("useRouteReferrer")(),g=i.useRef({actorID:f==null?void 0:f.actorID,tracePolicy:f==null?void 0:f.tracePolicy});f=b("CometRouteActorToasterBlocklist").route_trace_policies;var h=e==null?void 0:e.tracePolicy;f=f.includes(h);c=c!=null?b("getTopMostRoute")(c):null;e=e===c;var m=e&&!f;i.useEffect(function(){var c,e=(c=g.current)==null?void 0:c.actorID,f=(c=g.current)==null?void 0:c.tracePolicy;if(e!=null&&e!==d&&m){c=function(a){var c;c=a==null?void 0:(c=a.viewer)==null?void 0:(c=c.actor)==null?void 0:c.name;if(c!=null){var d;d=(a==null?void 0:(d=a.viewer)==null?void 0:(d=d.actor)==null?void 0:d.__typename)==="User";a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:(a=a.toast_icon)==null?void 0:a.uri;a=a!=null?i.jsx(b("TetraProfilePhoto.react"),{shape:"circle",size:32,source:{uri:a}}):null;c=k(c,d);b("cometPushToast").cometPushToast({icon:a,message:c});j.onReady(function(a){a=a.log;a(function(){var a;return{destination:(a=h)!=null?a:"comet.app",destination_type:"comet_route",source:f,source_type:"comet_route",source_userid:e}})})}};var n={scale:b("WebPixelRatio").get()};b("promiseDone")(b("CometRelay").fetchQuery(a,l,n).toPromise(),c)}g.current={actorID:d,tracePolicy:h}},[d,h,a,m]);return null}}),null);
__d("CometUncaughtError.react",["fbt","CometContentArea.react","NullStateGeneral","React","TetraNullState.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(){return h.jsx("div",{className:"k4urcfbm poy2od1o taijpn5t nznu9b0o j83agx80 bp9cbjyn",children:h.jsx(b("CometContentArea.react"),{verticalAlign:"middle",children:h.jsx(b("TetraNullState.react"),{headline:g._("D\u00e9sol\u00e9, une erreur s\u2019est produite\u00a0:("),icon:b("NullStateGeneral")})})})}}),null);
__d("CometToasterView_DO_NOT_USE.react",["BasePortal.react","BaseToasterView.react","CometContextualLayerAnchorRoot.react","CometToastAnimationInternal.react","React","gkx","stylex","useToasterStateManager"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={root:{bottom:"lfi1tu6t",listStyle:"p7hjln8o",position:"poy2od1o",start:"re5koujm",zIndex:"kavbgo14"},rootBlue:{zIndex:"guygq49l"},rootWorkplaceLegacy:{zIndex:"lidd1b6n"},toastContainer:{display:"q9uorilb",position:"pmk7jnqg",start:"j9ispegn"}};function a(a){var c=a.filterToasts;a=a.maxVisible;a=a===void 0?1:a;var d=b("useToasterStateManager")(),e=h.useState(function(){return d.getEmptyState()}),f=e[0],j=e[1];h.useEffect(function(){var a=d.registerView(j,0);return function(){a.remove()}},[d]);return h.jsx(b("BasePortal.react"),{target:document.body,children:h.jsx(b("BaseToasterView.react"),{className:(g||(g=b("stylex")))([i.root,b("gkx")("708253")?null:b("gkx")("1341692")?i.rootWorkplaceLegacy:i.rootBlue]),filterToasts:c,maxVisible:a,toasterState:f,children:function(a,c,d,e){return h.jsx(b("CometContextualLayerAnchorRoot.react"),{children:h.jsx(b("CometToastAnimationInternal.react"),{expired:d,id:c,position:e,xstyle:i.toastContainer,children:a})},c)}})})}}),null);
__d("CometGHLTestUBT",["Banzai","JSScheduler","ghlTestUBT"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=3;function a(){b("JSScheduler").scheduleLoggingPriCallback(function(){b("ghlTestUBT")(function(a){var c;return b("Banzai").post("search_check",(c={},c[g]=a,c))})})}}),null);
__d("CometErrorLogging",["ClientConsistency","ErrorPoster","ErrorPubSub","JSErrorLoggingConfig","SiteData","WebSession"],(function(a,b,c,d,e,f){"use strict";f.init=a;var g,h=(c=b("JSErrorLoggingConfig")).appId,i=c.extra,j=c.report_source,k=c.report_source_ref,l=c.sampleWeight,m;function n(a){b("ErrorPoster").postError(a,{additional_client_revisions:b("ClientConsistency").getAdditionalRevisions(),appId:h,cavalry_lid:m,cerror:!0,client_revision:(a=b("SiteData")).client_revision,extra:i,loggingFramework:"comet",push_phase:a.push_phase,report_source:j,report_source_ref:k,sample_weight:l,script_path:"/comet",server_revision:a.server_revision,spin:a.spin,web_session_id:b("WebSession").getId()})}function a(a){m=a,l!=null&&(g||(g=b("ErrorPubSub"))).addListener(n)}}),null);
__d("CometPixelRatioUpdater",["Cookie","Run"],(function(a,b,c,d,e,f){"use strict";f.startDetecting=a;var g="dpr";function h(a){b("Cookie").set(g,String(a))}function i(){b("Cookie").clear(g)}function j(){window.devicePixelRatio!==1?h(window.devicePixelRatio):i()}function a(){b("Run").onBeforeUnload(j,!1),"onpagehide"in window&&window.addEventListener("pageHide",j)}}),null);
__d("WebBrowserDimensionsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:WebBrowserDimensionsLoggerConfig")}),null);
__d("CometBrowserDimensionsLogger",["SiteData","WebBrowserDimensionsTypedLoggerLite","getViewportDimensions"],(function(a,b,c,d,e,f){"use strict";f.init=a;var g=null;function h(){g===null&&(g=b("getViewportDimensions")());return g}function a(a){var c,d=h();c={client_hint_width:a==null?void 0:a.clientHintWidth,pixel_ratio:(c=window.devicePixelRatio)!=null?c:1,screen_x:window.screen.width,screen_y:window.screen.height,server_pixel_ratio:b("SiteData").pr,server_viewport_x:a==null?void 0:a.viewportWidth,server_viewport_y:a==null?void 0:a.viewportHeight,viewport_x:d.width,viewport_y:d.height};window.navigator&&window.navigator.hardwareConcurrency&&(c.cpu_cores_count=window.navigator.hardwareConcurrency);if(window.innerWidth>0&&window.outerWidth>0){a=Math.round(window.outerWidth/window.innerWidth*100)/100;c.zoom_ratio=a}if(window.getComputedStyle&&document.documentElement!=null){d=window.getComputedStyle(document.documentElement);d!=null&&(c.document_font_size=d.fontSize)}b("WebBrowserDimensionsTypedLoggerLite").log(c)}}),null);
__d("MWChatMultitabCookieWriter.bs",["DeferredCookie","MWChatThreadId.bs","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.chatHeads.map(function(a){return{i:b("MWChatThreadId.bs").serializeFuture(a)}});a=a.openTabsState;var d;if(a.length!==1)d=void 0;else{a=a[0];a=a.threadID;d=a?b("MWChatThreadId.bs").serializeFuture(a._0):void 0}a=JSON.stringify({t3:c,utc3:Date.now(),lm3:d,v:1});a!==void 0?b("DeferredCookie").addToQueue("presence","C"+a,0,"",!1,!1,!0):b("recoverableViolation")("Failed to serialize cookie","messenger_comet")}c=1;f.version=c;f.write=a}),null);
__d("AvailableListState",[],(function(a,b,c,d,e,f){a=Object.freeze({OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3});e.exports=a}),null);
__d("PresenceStatusProviderSubscription",["AvailableListState","CometHomeContactsConfig","CometRelay","CurrentUser","WebPixelRatio","gkx","promiseDone","recoverableViolation","relay-runtime","requireDeferred","PresenceStatusProviderSubscription_PresenceStatusChatVisibilityQuery.graphql","PresenceStatusProviderSubscription_ContactProfilesQuery.graphql","PresenceStatusProviderSubscription_rankings.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j=b("requireDeferred")("FBMqttChannel"),k=b("requireDeferred")("MessengerMQTTPresence"),l=Object.assign.apply(Object,[{}].concat(Object.entries(b("AvailableListState")).map(function(a){var b,c=a[0];a=a[1];return b={},b[String(a)]=c,b}))),m=g!==void 0?g:g=b("PresenceStatusProviderSubscription_PresenceStatusChatVisibilityQuery.graphql"),n=h!==void 0?h:h=b("PresenceStatusProviderSubscription_ContactProfilesQuery.graphql");function o(a){var b=null,c=j.onReady(function(c){c.subscribe("/legacy_web",function(b){var c=JSON.parse(b);c.type==="privacy_changed"&&a.commitUpdate(function(a){a=a.getRoot();if(a==null)return;a=a.getLinkedRecord("viewer");if(a==null)return;a.setValue(((a=c.data)==null?void 0:a.visibility)===!0,"chat_visibility")})}),b=function(){return c.unsubscribeAll("/legacy_web")}});return{remove:function(){c.remove(),b!=null&&b()}}}function p(a,b,c,d,e){var f=null,g=k.onReady(function(g){g.subscribe({reset:function(){var f=b.current,g={};Object.keys(f).forEach(function(a){delete g[a]});b.current=g;v(a,b.current,c,d,e)},setMultiFromMQTT:function(f){var g=b.current,h=babelHelpers["extends"]({},g);f.forEach(function(a){h[a.u]={last_active_time:a.l,status:a.p}});b.current=h;v(a,b.current,c,d,e)}}),f=function(){return g.unsubscribe()}});return{remove:function(){g.remove(),f!=null&&f()}}}function q(a,c,d,e,f){var g,h=b("relay-runtime").getRequest(m);h=b("relay-runtime").createOperationDescriptor(h,{});h=a.lookup(h.fragment);g=(g=h.data)==null?void 0:g.viewer;var i=typeof g==="object"?g==null?void 0:g.chat_visibility:null;e.current=!!i;g=a.subscribe(h,function(b){b=b.data;b=b==null?void 0:b.viewer;if(typeof b!=="object"||b==null)return;var g=b==null?void 0:b.presence_view_side_settings;if(typeof g==="object"&&g!=null&&g.has_converted_to_view_side_settings===!0)return;g=b.chat_visibility;i!=null&&g!==i&&v(a,c.current,d,e,f);i=g});return g}var r={height:36,scale:b("WebPixelRatio").get(),width:36},s=function(a,c,d){if(c.size===0)return;b("promiseDone")(b("CometRelay").fetchQuery(d,n,{ids:Array.from(c),scale:b("WebPixelRatio").get()},b("gkx")("1820749")?{fetchPolicy:"store-or-network"}:void 0).toPromise().then(function(c){var e=(c==null?void 0:(c=c.viewer)==null?void 0:c.chat_sidebar_contact_nodes)||[];d.commitUpdate(function(c){e.forEach(function(d){var e,f=d==null?void 0:d.id;if(f==null)return;var g=c.get(f);g==null&&(g=c.create(f,"User"));var h=d==null?void 0:d.name;if(h==null)return b("recoverableViolation")("ContactProfilesQuery return empty name for user "+f,"messenger_comet");g.setValue(h,"name");h=g.getOrCreateLinkedRecord("profile_picture","Image",r);e=d==null?void 0:(e=d.profile_picture)==null?void 0:e.uri;if(e==null)return b("recoverableViolation")("ContactProfilesQuery return empty profileUri for user "+f,"messenger_comet");h.setValue(d==null?void 0:(e=d.profile_picture)==null?void 0:e.uri,"uri");g.setLinkedRecord(h,"profile_picture",r);a.push(g)}),u(c,a)})}))},t=function(a,c,d,e){a.commitUpdate(function(f){if(d==null)return;var g=new Set(Object.keys(c).filter(function(a){return b("CurrentUser").getID()!==a&&((a=c[a])==null?void 0:a.status)===2})),h=d.filter(function(a){var b=a.buddy_id;a=a.status;return a==null||b==null?!1:((b=e.current?(b=c[b])==null?void 0:b.status:0)!=null?b:0)===a}).map(function(a){a=(a=a.user)==null?void 0:a.id;if(a==null)return null;g["delete"](a);return f.get(a)}).filter(Boolean);g.size>0&&(g.forEach(function(a){var b=f.get(a);if(b!=null&&b.getValue("name")!=null){var c=b.getLinkedRecord("profile_picture",r);c!=null&&c.getValue("uri")!=null&&(h.push(b),g["delete"](a))}}),s(h,g,a));u(f,h)})};function u(a,c){a=a.getRoot().getLinkedRecord("viewer");if(a==null){b("recoverableViolation")("Viewer should not be null here, something has gone horribly wrong","messenger_web_product");return}a.setLinkedRecords(c,"chat_sidebar_contacts",{count:b("CometHomeContactsConfig").numContactsToFetch})}function v(a,b,c,d,e){a.commitUpdate(function(a){var e=a.getRoot();if(e==null)return;e=e.getLinkedRecord("viewer");if(e==null)return;var f=e.getLinkedRecord("presence_view_side_settings"),g=f!=null&&f.getValue("has_converted_to_view_side_settings")===!0||e.getValue("chat_visibility")===!0;f=e.getLinkedRecord("actor");f!=null&&g?f.setValue("ACTIVE","availability"):f!=null&&f.setValue("OFFLINE","availability");d.current=g;e=Object.keys(b);e.forEach(function(c){var d,e;d=(d=b[c])==null?void 0:d.status;e=(e=b[c])==null?void 0:e.last_active_time;d=d==null?null:l[String(d)];var f=a.get(c);f==null&&d==="ACTIVE"&&(f=a.create(c,"User"));f!=null&&(f.setValue(d==="ACTIVE"&&g?d:null,"availability"),!g?f.setValue(null,"last_active_time"):e!==0&&e!=null&&f.setValue(e,"last_active_time"))});c()}),t(a,b,e,d)}a={init:function(a,c,d,e,f){f=f!=null?f.map(function(a){return b("CometRelay").readInlineData(i!==void 0?i:i=b("PresenceStatusProviderSubscription_rankings.graphql"),a)}):null;var g=o(a),h=p(a,c,d,e,f),j=q(a,c,d,e,f);return{remove:function(){h.remove(),g.remove(),j.dispose()}}}};e.exports=a}),null);
__d("PresenceStatusProviderSubscriptionComponent.react",["CometRelay","PresenceStatusProviderSubscription","React","WebPixelRatio","PresenceStatusProviderSubscriptionComponentQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=function(){return b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("PresenceStatusProviderSubscriptionComponentQuery.graphql"),{scale:b("WebPixelRatio").get()})};function a(a){var c=i(),d=(c=c==null?void 0:(c=c.viewer)==null?void 0:c.chat_sidebar_contact_rankings)!=null?c:null,e=b("CometRelay").useRelayEnvironment();h.useEffect(function(){var c=b("PresenceStatusProviderSubscription").init(e,a.presenceMap,a.presenceInformer,a.chatVisibilityRef,d);return function(){c.remove()}},[e,a.presenceInformer,a.presenceMap,d,a.chatVisibilityRef]);return null}}),null);
__d("LSDbStorage",["IndexedDbKeyComparer","LSStorage","bs_caml_int64","nativePromiseRegeneratorRuntime","unrecoverableViolation","BPlusTreeBase"],(function(a,b,c,d,e,f){"use strict";var g=function(a,c){return b("BPlusTreeBase")(b("IndexedDbKeyComparer"),16,{read:function(b){return a.read(c,b)},readExn:function(b){return a.readExn(c,b)},readHeader:function(){return a.readHeader(c)},remove:function(b){return a.remove(c,b)},write:function(b,d){return a.write(c,b,d)},writeHeader:function(b){return a.writeHeader(c,b)},writeNew:function(b){return a.writeNew(c,b)}})};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"Transaction has finished")||this}return b}(babelHelpers.wrapNativeSuper(Error));function h(a){if(!Array.isArray(a)||a.length!==2||a.some(function(a){return!Number.isInteger(a)}))throw b("unrecoverableViolation")("Expected int64","messenger_web_product");return b("bs_caml_int64").to_float(a)}function i(a,c){function d(c){if(c.done)return c.value;if(!(c.value instanceof Promise))throw b("unrecoverableViolation")("expected promise","messenger_web_product");return c.value.then(function(b){return d(a.next(b))})}return d(a.next(c))}function j(a){return{next:function*(b){b=a.next(b);while(b.value instanceof window.Promise)b=a.next(yield b.value);return b}}}function k(a){var b=j(a);return{next:function(a){return i(b.next(a))}}}function a(a,c,d){var e=b("LSStorage").searchKey.bind(null,d),f=Promise.resolve();async function l(a,b,c,d,e){a=a.table(c);c=d===void 0?g(a,b):g(a.index(d),b);d=await i(c.getWithDefault(e,void 0));return d===void 0?void 0:i(a.readDataExn(b,d))}async function m(a,b,c,d,f){a=await l(a,b,c,d,f);return a===void 0?void 0:e(c,a)}function n(a,b,c,d,e,f){return k(function*(){var h=a.table(c);h.readHeader(b);var i=d===void 0?g(h,b):g(h.index(d),b);i=j(i.entries(babelHelpers.extends({},f,{dir:e})));var k=(yield* i.next());while(!k.done){var l=k.value,m=l[0];l=l[1];k=(yield* i.next(yield [m,yield* h.readDataExn(b,l)]))}}())}async function o(a,c,e){var f=d.tableNames[e].autoIncrement;if(!f)throw b("unrecoverableViolation")("only supported for auto-incrementing tables","messenger_web_product");f=await i(a.table(e).readSeed(c));if(f===void 0)throw b("unrecoverableViolation")("unexpected undefined autoIncrementSeed","messenger_web_product");return b("bs_caml_int64").of_float(f)}function p(a,c){function f(a,b,d,e){a=JSON.stringify([a,b]);b=c.get(a);c.set(a,[b==null?d:b[0],e])}async function j(c,f,g,h){function i(a,b){var c=[],d=a;while(d!==0)c.push(d.hd),d=d.tl;return c.length>=b?a:c.reduceRight(function(a,b){return{hd:b,tl:a}},{hd:[[]],tl:0})}if(h!=null&&b("IndexedDbKeyComparer")(g,h)===0)return;f=d.tableNames[f];var j=f.cascadeUpdates,k=f.primaryKeyIds,l=async function(){if(o){if(r>=m.length)return"break";f=m[r++]}else{r=m.next();if(r.done)return"break";f=r.value}var b=f,j=b.indexName;b=b.tableName;var l=d.tableNames[b],s=l.indexes;l=l.primaryKeyIds;var t=j==null?l:s[j].keyIds;l={gte:g,lte:i(g,t.length)};s=n(a,c,b,j,"asc",l);j=await s.next();l=[];while(!j.done)l.push(j.value),j=await s.next();for(var s=0;s<l.length;s++){j=l[s];j[0];j=j[1];var u=e(b,j);h===void 0?await q(c,b,u):await p(c,b,u,k.reduce(function(a,b,c){b=a[0];a=a[1];if(!a)return[b,a];b[t[c]]=a.hd;return[b,a.tl]},[babelHelpers.extends({},j),h])[0])}};for(var m=j,o=Array.isArray(m),r=0,m=o?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){j=await l();if(j==="break")break}}async function k(c,h,j){var k=a.table(h),l=g(k,c),m=d.tableNames[h],n=e(h,j),o=Object.keys(m.indexes).reduce(function(b,c){var a=e(h,j,c);a!=null&&(b[c]=a);return b},{}),p={},r=await i(l.getWithDefault(n,void 0)),s;if(r!==void 0)s=await i(k.readDataExn(c,r)),Object.keys(m.indexes).length&&(p=Object.keys(m.indexes).reduce(function(b,c){var a=e(h,s,c);a!=null&&(b[c]=a);return b},{})),await i(k.writeData(c,r,j));else{if(m.autoIncrement)throw b("unrecoverableViolation")("Id must not be specified for new record when table has an autoincrementing primary key","messenger_web_product");r=await i(k.writeNewData(c,j));await i(l.set(n,r))}m=Object.keys(o);for(var l=0;l<m.length;l++){var t=m[l];p[t]!==void 0&&b("IndexedDbKeyComparer")(p[t],o[t])===0&&(delete o[t],delete p[t])}t=new Set();m=Object.keys(o);for(var l=0;l<m.length;l++){var u=m[l],v=g(k.index(u),c);v=await i(v.getWithDefault(o[u]));v!=null&&!t.has(v)&&(await q(c,h,e(h,await i(k.readDataExn(c,v)))),t.add(v))}u=Object.keys(o);for(var v=0;v<u.length;v++){m=u[v];l=g(k.index(m),c);await i(l.set(o[m],r))}t=Object.keys(p);for(var l=0;l<t.length;l++){m=t[l];u=g(k.index(m),c);await i(u.delete(p[m]))}f(h,n,s,j)}async function p(a,c,d,f){var g=e(c,f);b("LSStorage").areKeysEqual(d,g)||await q(a,c,d);await k(a,c,f)}async function q(b,c,h){var j=a.table(c),k=g(j,b),l=d.tableNames[c],m=await i(k.getWithDefault(h,void 0)),n;if(m!==void 0){n=await i(j.readDataExn(b,m));if(Object.keys(l.indexes).length){l=Object.keys(l.indexes);for(var o=0;o<l.length;o++){var p=l[o],q=e(c,n,p);if(q!=null){p=g(j.index(p),b);await i(p.delete(q))}}}await i(k.delete(h));await i(j.remove(b,m));f(c,h,n,void 0)}}async function r(c,j,k){var l=a.table(j),m=g(l,c),n=d.tableNames[j];if(n.autoIncrement){var o=k[d.tableNames[j].primaryKeyIds[0]];o=b("bs_caml_int64").of_float(await i(l.incrementSeed(c,o===void 0?o:h(o))));k[d.tableNames[j].primaryKeyIds[0]]=o}o=e(j,k);if(o==null)throw new Error("Evaluating the object store's key path did not yield a value");if(!await i(m.has(o))){var p=Object.keys(n.indexes);for(var r=0;r<p.length;r++){var s=p[r],t=e(j,k,s),u=new Set();if(t!=null){s=g(l.index(s),c);s=await i(s.getWithDefault(t));s!=null&&!u.has(s)&&(await q(c,j,e(j,await i(l.readDataExn(c,s)))),u.add(s))}}t=await i(l.writeNewData(c,k));await i(m.set(o,t));u=Object.keys(n.indexes);for(var s=0;s<u.length;s++){p=u[s];r=e(j,k,p);if(r!=null){m=g(l.index(p),c);await i(m.set(r,t))}}f(j,o,void 0,k)}}return{table:function(b){return{put:async function(a){var c=new WeakMap();await k(c,b,a);await j(c,b,e(b,a))},upsert:async function(a,c){var d=new WeakMap();await p(d,b,a,c);await j(d,b,a,e(b,c))},delete:async function(a){var c=new WeakMap();await q(c,b,a);await j(c,b,a)},add:function(a){return r(new WeakMap(),b,a)},get:function(c,d){d===void 0&&(d=new WeakMap());return l(a,d,b,void 0,c)},entries:function(c,d,e){d===void 0&&(d="asc");e===void 0&&(e={});return n(a,c,b,void 0,d,e)},peekNextAutoIncrementId:function(){return o(a,new WeakMap(),b)},index:function(c){return{get:function(d){return l(a,new WeakMap(),b,c,d)},getKey:function(d){return m(a,new WeakMap(),b,c,d)},entries:function(d,e,f){e===void 0&&(e="asc");f===void 0&&(f={});return n(a,d,b,c,e,f)}}}}}}}return{getTableData:function(){return d},runInTransaction:function(b,d){var e=new Map();return new Promise(function(d,g){f=f.then(async function(){try{var f=a.createTransaction(),h=await b(p(f,e)),i=new WeakMap();await f.flush();for(var f=e,j=Array.isArray(f),k=0,f=j?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=f.length)break;l=f[k++]}else{k=f.next();if(k.done)break;l=k.value}l=l;var m=l[0];l=l[1];var n=l[0];l=l[1];m=JSON.parse(m);var o=m[0];m[1];await c.notifyTableAndIndexSubscribers(o,n,l,i)}d(h)}catch(a){g(a)}c.notifyCommit()})})},subscribeToCommit:function(a){return c.subscribeToCommit(a)},table:function(b){return{get:function(c,d){d===void 0&&(d=new WeakMap());return l(a.createTransaction(),d,b,void 0,c)},entries:function(c,d,e){d===void 0&&(d="asc");e===void 0&&(e={});return n(a.createTransaction(),c,b,void 0,d,e)},peekNextAutoIncrementId:function(){return o(a.createTransaction(),new WeakMap(),b)},subscribe:function(){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];return c.subscribeTable.apply(c,[b].concat(d))},index:function(d){return{get:function(c,e){e===void 0&&(e=new WeakMap());return l(a.createTransaction(),e,b,d,c)},getKey:function(c){return m(a.createTransaction(),new WeakMap(),b,d,c)},entries:function(c,e,f){e===void 0&&(e="asc");f===void 0&&(f={});return n(a.createTransaction(),c,b,d,e,f)},subscribe:function(){for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];return c.subscribeIndex.apply(c,[b,d].concat(e))}}}}},subscriptionManager:c,clearCacheIfSupported:function(){var b=a;b instanceof Object&&b.clearCache!==void 0&&b.clearCache instanceof Function&&b.clearCache()}}}d=Object.assign(a,c);e.exports=d}),null);
__d("MemoryDbStore",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g={};function h(b){if(b==null)return b;var c=Object.getOwnPropertyNames(b),a={},d,e;for(d=0;d<c.length;d++)e=b[c[d]],a[c[d]]=Array.isArray(e)?[].concat(e):e;return a}function i(a,c){var d=c===void 0?"root":"index("+c+")";return{read:function*(b,c){return a.get(c)},readExn:function*(c,d){if(!a.has(d))throw b("unrecoverableViolation")("expected key","messenger_web_product");return a.get(d)},readHeader:function*(b){return a.get(d)},remove:function*(b,c){a.delete(c)},write:function*(b,c,d){a.put(c,d)},writeHeader:function*(b,c){a.put(d,c)},writeNew:function*(b,c){return a.add(c)}}}function j(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(){var a=new Map();return{createTransaction:function(){var c=new Map();function d(b){return j(a,b,function(){return{data:new Map(),seed:0}})}return{flush:async function(){c.forEach(function(a,b){var c=a.data;a=a.seed;var e=d(b);c.forEach(function(a,b){a===g?e.data.delete(b):e.data.set(b,a)});e.seed=a})},table:function(a){var e=d(a),f=j(c,a,function(){return{data:new Map(),seed:e.seed}}),k={add:function(a){f.data.set(f.seed,a);f.seed++;return f.seed-1},delete:function(a){f.data.set(a,g)},get:function(a){if(!f.data.has(a))return e.data.get(a);a=f.data.get(a);return a===g?void 0:a},has:function(a){return f.data.has(a)&&f.data.get(a)!==g||e.data.has(a)},put:function(a,b){f.data.set(a,b)}};return babelHelpers.extends({},i(k),{readDataExn:function*(a,c){if(!k.has(c))throw b("unrecoverableViolation")("expected key","messenger_web_product");return k.get(c)},writeData:function*(a,b,c){k.put(b,h(c))},writeNewData:function*(a,b){return k.add(h(b))},incrementSeed:function*(a,b){a=Math.max(k.get("seed")||0,b||0);k.put("seed",a+1);return b===void 0?a:b},index:function(a){return i(k,a)},readSeed:function*(a){return k.get("seed")||0}})}}}}}}),null);
__d("LSJSTestMemoryStorage.bs",["LSStorage","LSDbStorage","MemoryDbStore","MPWLSDBCreateSchema.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("LSDbStorage")(b("MemoryDbStore")(),b("LSStorage").createSubscriptionManager(b("MPWLSDBCreateSchema.bs").metadata),a)}f.make=a}),null);
__d("MWLSDatabaseInitialData.bs",["bs_curry","LSDict","LSJson","SkytaleDB","bs_caml_int64","bs_caml_format","CurrentUser","CurrentLocale","LSSyncChannel.bs","LSDatabaseType.bs","LSMailboxInitialSyncCursor.bs","LightspeedWebMailboxEpochId"],(function(a,b,c,d,e,f){"use strict";function g(a,b){return b.reduce(function(b,c){return b.then(function(b){return a.put(c)})},window.Promise.resolve(void 0))}function h(a){var c=b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),d=b("bs_caml_format").caml_int64_of_string(b("LightspeedWebMailboxEpochId").epochId),e=b("bs_caml_int64").of_float(b("LSMailboxInitialSyncCursor.bs").lastSyncTimestampMs.contents);return[function(c){var f;return g(b("SkytaleDB").table(a,"network_requests"),[{a:"",b:(c=b("LSDatabaseType.bs")).mailbox,c:d,d:void 0,e:(f=b("bs_caml_int64")).zero,f:f.zero,g:e,h:void 0},{a:"",b:c.contact,c:d,d:void 0,e:f.zero,f:f.zero,g:e,h:void 0},{a:"",b:c.payments,c:void 0,d:void 0,e:f.zero,f:f.zero,g:f.zero,h:void 0},{a:"",b:c.threadTheme,c:void 0,d:void 0,e:f.zero,f:f.zero,g:f.zero,h:void 0},{a:"",b:c.sticker,c:void 0,d:void 0,e:f.zero,f:f.zero,g:f.zero,h:void 0},{a:"",b:c.settings,c:void 0,d:void 0,e:f.zero,f:f.zero,g:f.zero,h:void 0}])},function(d){var e,f;return g(b("SkytaleDB").table(a,"sync_groups"),[{a:(d=b("LSDatabaseType.bs")).mailbox,b:void 0,c:(e=b("bs_caml_int64")).zero,d:JSON.stringify((f=b("LSMailboxInitialSyncCursor.bs")).syncParams.contents),e:!0,f:e.neg_one,g:!1,h:e.zero,i:e.of_float(f.lastSyncTimestampMs.contents),j:void 0,k:void 0,l:void 0,m:void 0,n:f.syncChannel.contents},{a:d.contact,b:void 0,c:e.zero,d:c,e:!0,f:e.neg_one,g:!1,h:e.zero,i:e.of_float(f.lastSyncTimestampMs.contents),j:void 0,k:void 0,l:void 0,m:void 0,n:f.syncChannel.contents},{a:d.payments,b:void 0,c:e.zero,d:c,e:!0,f:e.mk(1316134911,2328),g:!1,h:e.zero,i:e.zero,j:void 0,k:void 0,l:void 0,m:void 0,n:(f=b("LSSyncChannel.bs")).mqtt},{a:d.threadTheme,b:void 0,c:e.zero,d:c,e:!0,f:e.neg_one,g:!1,h:e.zero,i:e.zero,j:void 0,k:void 0,l:void 0,m:void 0,n:f.mqtt},{a:d.sticker,b:void 0,c:e.zero,d:c,e:!0,f:e.mk(1316134911,2328),g:!1,h:e.zero,i:e.zero,j:void 0,k:void 0,l:void 0,m:void 0,n:f.mqtt},{a:d.ranking,b:void 0,c:e.zero,d:c,e:!0,f:e.mk(1316134911,2328),g:!1,h:e.zero,i:e.zero,j:void 0,k:void 0,l:void 0,m:void 0,n:f.mqtt},{a:d.settings,b:void 0,c:e.zero,d:c,e:!0,f:e.neg_one,g:!1,h:e.zero,i:e.zero,j:void 0,k:void 0,l:void 0,m:void 0,n:f.mqtt}])},function(c){return g(b("SkytaleDB").table(a,"_user_info"),[{a:b("bs_caml_int64").one,b:b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID())}])}]}function a(a){return h(a).reduce(function(a,c){return a.then(b("bs_curry").__1(c))},window.Promise.resolve(void 0))}d={a:"",b:(c=b("bs_caml_int64")).zero,c:void 0,d:void 0,e:c.zero,f:c.zero,g:c.zero,h:void 0};f.writeRows=g;f.defaultNetworkRequest=d;f.writeData=h;f.run=a}),null);
__d("MWLSSchemaEphemeral.bs",["Promise","LSTransaction.bs","MPWLSDBCreateSchema.bs","LSJSTestMemoryStorage.bs","MWLSDatabaseInitialData.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("Promise").resolve(b("LSJSTestMemoryStorage.bs").make(b("MPWLSDBCreateSchema.bs").metadata)).then(function(a){return b("LSTransaction.bs").run(a,b("MWLSDatabaseInitialData.bs").run,"readWrite").then(function(b){return a})})}f.createDB=a}),null);
__d("CometRelayEF",["Bootloader","ClientConsistencyEventEmitter","CometSSREntrypoint","cometAsyncFetch","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";f.fetchPredictions=h;f.fetchPredictedResources=a;var g=new Map();function h(a,c){if(!b("gkx")("1334580"))return;a=b("CometSSREntrypoint").processRootEntryPoint(a,c);var d=[];a.forEach(function(a){g.has(a.name)||d.push(a.name)});if(d.length===0)return;var e=b("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:d},method:"POST"});d.forEach(function(a){g.set(a,e)})}function a(a,c){if(!b("gkx")("1334580"))return;h(a,c);a=b("CometSSREntrypoint").processRootEntryPoint(a,c);a.forEach(function(a){var c=a.name,d=g.get(c);d&&d!==!0&&b("promiseDone")(d,function(a){if(a!=null&&typeof a==="object"){var d;a="consistency"in a?a:{consistency:null,predictions:a};b("Bootloader").loadPredictedResourceMap(a.predictions[c],null,(d=a.consistency)==null?void 0:d.rev);a.consistency!=null&&b("ClientConsistencyEventEmitter").emit("newEntry",a.consistency)}});g.set(a.name,!0)})}}),null);
__d("RTWebCallBlockSettingHooks",["CometRelay","DateConsts","React","RTWebCallBlockedSettingSubscription","RTWebPreCallContext","ServerTime","gkx","promiseDone","RTWebCallBlockSettingHooksQuery.graphql"],(function(a,b,c,d,e,f){"use strict";f.useCallBlockSettingValue=m;f.useHasCallsBlocked=n;f.useCallBlockSetting=a;var g,h=b("React"),i=6e4,j=g!==void 0?g:g=b("RTWebCallBlockSettingHooksQuery.graphql"),k=function(a,b){return function(c){c=c.getRoot();if(c==null)return;c=c.getLinkedRecord("viewer");if(c==null)return;c.setValue(b,a)}};function l(a){return a===-1?a:(a||0)*b("DateConsts").MS_PER_SEC}function m(){var a=b("CometRelay").useRelayEnvironment(),c=b("CometRelay").getActorID(a),d=h.useState(-1),e=d[0],f=d[1];h.useEffect(function(){var d=b("CometRelay").fetchQuery(a,j,{},b("gkx")("1820749")?{fetchPolicy:"store-or-network"}:void 0).toPromise().then(function(a){a=a==null?void 0:a.viewer;a!=null&&f(l(a.call_blocked_until))});b("promiseDone")(d);var e=b("RTWebCallBlockedSettingSubscription").subscribe(a,{viewer_id:c},function(b){b=b==null?void 0:b.rtweb_call_blocked_setting_subscribe;b!=null&&(f(l(b.call_blocked_until)),a.commitUpdate(k("call_blocked_until",b.call_blocked_until)))});return function(){e.dispose()}},[a,c]);return e}function n(){var a=m(),c=b("ServerTime").getMillis(),d=a<0,e=a>c;c=h.useState(d||e);var f=c[0],g=c[1];(d||e)!==f&&g(d||e);h.useEffect(function(){if(e){var c=window.setInterval(function(){a<=b("ServerTime").getMillis()&&(g(!1),window.clearInterval(c))},i);return function(){window.clearInterval(c)}}},[a,e]);return f}function a(){var a=h.useContext(b("RTWebPreCallContext")),c=n();h.useEffect(function(){a!=null&&a.callInviteModel.startListening({callsBlocked:c})},[a,c])}}),null);
__d("showDesktopNotification",["MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","ZenonUserActionLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=8e3;function a(){return function(a){var c=a.acceptCall,d=a.body,e=a.icon;a=a.title;var f={body:d,closeTime:g,icon:e,onClick:function(){b("ZenonUserActionLogger").logClick({component:"browser_notification",surface:"desktop_notification"}),window.focus(),c({trigger:"desktop_notification"})},onShow:function(){b("ZenonUserActionLogger").logImpression({component:"browser_notification",surface:"desktop_notification"})},title:a};if(b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DEFAULT){b("MessengerDesktopNotifications").requestPermission(function(){b("MessengerDesktopNotifications").showNotification(f)});return}b("MessengerDesktopNotifications").showNotification(f)}}}),null);
__d("RTWebCallInviteDesktopNotification.react",["fbt","React","RTWebPreCallHooks","ZenonUsersHooks","showDesktopNotification","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){a=a.invite;return(a==null?void 0:a.type)==="ringing"?h.jsx(i,{invite:a}):null}function i(a){a=a.invite;var c=b("showDesktopNotification")(),d=b("usePrevious")(a.ringID),e=b("RTWebPreCallHooks").useAcceptCallCallback(),f=b("ZenonUsersHooks").useZenonUser(a.inviterID),g=a.requestingVideo,h=a.participants.length>1;if(d!==a.ringID&&f!=null){c({acceptCall:e,body:k(f.shortName),icon:(d=f.profilePictureUrl)!=null?d:null,title:j(g,h)})}return null}function j(a,b){if(!b)return a?g._("Discussion vid\u00e9o entrante"):g._("Appel entrant");else return a?g._("Discussion vid\u00e9o de groupe entrante"):g._("Appel de groupe entrant")}function k(a){return g._("{caller name} vous appelle. Cliquez pour r\u00e9pondre.",[g._param("caller name",a)])}}),null);
__d("ZenonDialogContext",["React","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a=b("React");d=a.createContext({hide:c=b("emptyFunction"),hideAll:c,hideByID:c,show:c,showByID:c,toggle:c});f=d;e.exports=f}),null);
__d("useRTWebIncomingCallDialog",["ix","fbt","React","RTWebPreCallContext","ZenonDialogContext","ZenonUserActionLogger","deferredLoadComponent","emptyFunction","fbicon","requireCond","requireDeferred","cr:1568669"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React"),j=b("deferredLoadComponent")(b("requireDeferred")("RTWebCometIncomingCallContent.react")),k=b("deferredLoadComponent")(b("requireDeferred")("RTWebCometCallDialog.react")),l=b("cr:1568669")?b("cr:1568669").addPoint:b("emptyFunction");function a(){var a=i.useContext(b("ZenonDialogContext")),c=a.hide,d=a.show;a=i.useContext(b("RTWebPreCallContext"));var e=a?a.callInviteModel:null;return i.useCallback(function(a){var f,n=a.inviterID,o=a.isVideoCall,p=a.onAccept,q=a.onDecline;a=a.participantIDs;b("ZenonUserActionLogger").logImpression({surface:"incoming_call_dialog"});l(64225282,"render_dialog",{instanceKey:+(e==null?void 0:(f=e.getCurrentInvite())==null?void 0:f.ringID)});d(i.jsx(k,{acceptIcon:o?b("fbicon")._(g("493173"),16):b("fbicon")._(g("558160"),16),acceptLabel:h._("Accepter"),acceptTestid:"answerCallButton",body:i.jsx(j,{inviterID:n,isVideoCall:o,participantIDs:a}),declineLabel:h._("Refuser"),onClose:function(a){b("ZenonUserActionLogger").logClick({component:a?"accept_button":"decline_button",surface:"incoming_call_dialog"});c();return a?p():q()},title:m(o,a.length>1)}));return{dismiss:c}},[e,c,d])}function m(a,b){if(!b)return a?h._("Discussion vid\u00e9o entrante"):h._("Appel entrant");else return a?h._("Discussion vid\u00e9o de groupe entrante"):h._("Appel de groupe entrant")}}),null);
__d("useRTWebIncomingUnsupportedBrowserDialog",["fbt","CometCardedDialogLoadingState.react","CometPlaceholder.react","JSResourceForInteraction","MessengerDesktopUpsellLinks","React","TetraContextRowExternalLink.react","ZenonDialogContext","ZenonUserActionLogger","lazyLoadComponent","requireCond","cr:1453546"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("lazyLoadComponent")(b("JSResourceForInteraction")("RTWebCometUnsupportedBrowserContent.react").__setRef("useRTWebIncomingUnsupportedBrowserDialog")),j=b("lazyLoadComponent")(b("JSResourceForInteraction")("RTWebCometCallDialog.react").__setRef("useRTWebIncomingUnsupportedBrowserDialog"));function k(a){var c=a.hide,d=a.inviterID,e=a.isVideoCall,f=a.onClose,k=a.participantIDs;a=a.threadType;var n=b("MessengerDesktopUpsellLinks").getDesktopUpsellLinkIfEnabledForCalls();return n!=null&&b("cr:1453546")!=null?h.jsx(b("cr:1453546"),{desktopAppstoreLink:n,hideDialog:function(){c(),f()},incomingUserID:d,isGroupCall:a===2,onUnmount:function(a){a||(c(),f())}}):h.jsx(b("CometPlaceholder.react"),{fallback:h.jsx(b("CometCardedDialogLoadingState.react"),{}),children:h.jsx(j,{acceptLabel:g._("Installer Chrome"),body:h.jsx(i,{inviterID:d,mainMessage:g._("Pour participer, t\u00e9l\u00e9chargez Chrome"),participantIDs:k,subMessage:g._("Cette fonctionnalit\u00e9 n\u2019est pas prise en charge par votre navigateur. Installez {link to install chrome} pour utiliser toutes les fonctionnalit\u00e9s d\u2019appels vocaux et de discussions vid\u00e9o de Messenger.",[g._param("link to install chrome",l(f))])}),declineLabel:g._("Plus tard"),onClose:function(a){a&&window.open("https://www.google.com/chrome/index.html","_blank"),c(),f()},title:g._("{Unsupported feature name} entrant",[g._param("Unsupported feature name",m(a,e))])})})}function a(){var a=h.useContext(b("ZenonDialogContext")),c=a.hide,d=a.show;return h.useCallback(function(a){b("ZenonUserActionLogger").logImpression({surface:"unsupported_browser_dialog"});a=babelHelpers["extends"]({},a,{hide:c});d(h.jsx(k,babelHelpers["extends"]({},a)));return{dismiss:c}},[c,d])}function l(a){return h.jsx(b("TetraContextRowExternalLink.react"),{linkProps:{target:"_blank",url:"https://www.google.com/chrome/index.html"},onPress:a,children:g._("Chrome")})}function m(a,b){if(a===2)return b?"Group Video Chat":"Group Audio Call";else return b?"Video Chat":"Audio Call"}}),null);
__d("useRTWebMissedCallDialog",["ix","fbt","CometCardedDialogLoadingState.react","CometPlaceholder.react","JSResourceForInteraction","React","ZenonDialogContext","ZenonUserActionLogger","lazyLoadComponent","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React"),j=b("lazyLoadComponent")(b("JSResourceForInteraction")("RTWebCometMissedCallContent.react").__setRef("useRTWebMissedCallDialog")),k=b("lazyLoadComponent")(b("JSResourceForInteraction")("RTWebCometCallDialog.react").__setRef("useRTWebMissedCallDialog"));function a(){var a=i.useContext(b("ZenonDialogContext")),c=a.hide,d=a.show;return i.useCallback(function(a){var e=a.inviterID,f=a.isVideoCall,m=a.onCallback,n=a.participantIDs;a=a.timeMissed;b("ZenonUserActionLogger").logImpression({surface:"missed_call_dialog"});d(i.jsx(b("CometPlaceholder.react"),{fallback:i.jsx(b("CometCardedDialogLoadingState.react"),{}),children:i.jsx(k,{acceptIcon:f?b("fbicon")._(g("493173"),16):b("fbicon")._(g("558160"),16),acceptLabel:h._("Rappeler"),body:i.jsx(j,{inviterID:e,isVideoCall:f,participantIDs:n,timeMissed:a}),declineLabel:h._("Fermer"),onClose:function(a){b("ZenonUserActionLogger").logClick({component:a?"call_back":"close_dialog",surface:"missed_call_dialog"});a&&b("ZenonUserActionLogger").logClick({component:"start_call_button",surface:"missed_call_dialog"});c();return a?m():void 0},title:l(f,n.length>1)})}));return{dismiss:c}},[c,d])}function l(a,b){if(!b)return a?h._("Discussion vid\u00e9o manqu\u00e9e"):h._("Appel manqu\u00e9");else return a?h._("Discussion vid\u00e9o de groupe manqu\u00e9e"):h._("Appel de groupe manqu\u00e9")}}),null);
__d("RTWebCometRoomIncomingCallDialog.entrypoint",["JSResourceForInteraction","RTWebCometRoomIncomingCallDialog_DisclaimerQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:b("RTWebCometRoomIncomingCallDialog_DisclaimerQuery$Parameters"),variables:{nuxID:8259}}}}},root:b("JSResourceForInteraction")("RTWebCometRoomIncomingCallDialogContainer.react").__setRef("RTWebCometRoomIncomingCallDialog.entrypoint")};e.exports=a}),null);
__d("useRoomIncomingCallDialog",["CometPlaceholder.react","CometRelay","React","RTWebCometRoomIncomingCallDialog.entrypoint","VideoChatLinksUserActionsMultiplexLogger","ZenonDialogContext","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useContext(b("ZenonDialogContext")),c=a.hide,d=a.show,e=b("useCometRelayEntrypointContextualEnvironmentProvider")();return g.useCallback(function(a){var f=a.inviterID,h=a.linkUrl,i=a.onAccept,j=a.onDecline,k=a.roomName;a=a.sender;new(b("VideoChatLinksUserActionsMultiplexLogger"))().setSurface("vcl_meetups_notification").setEvent("room_ringback_received").setVideoCallLinkURLRaw(h).log();var l=b("CometRelay").loadEntryPoint(e,b("RTWebCometRoomIncomingCallDialog.entrypoint"),{});d(g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(b("CometRelay").EntryPointContainer,{entryPointReference:l,props:{inviterID:f,linkUrl:h,onAccept:i,onDecline:j,roomName:k,sender:a}})}));return{dismiss:c}},[e,c,d])}}),null);
__d("useZenonDialogController",["React","usePrevious"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c){var d=g.useState(null),e=d[0],f=d[1],h=b("usePrevious")(a);g.useEffect(function(){if((a==null?void 0:a.ringID)===(h==null?void 0:h.ringID)&&(a==null?void 0:a.type)===(h==null?void 0:h.type))return;e&&(e.dismiss(),f(null));if(a===null)return;f(c())},[e,a,h,c]);return e}}),null);
__d("RTWebCometCallInviteDialogs.react",["Actor","React","RTWebPreCallContext","RTWebPreCallHooks","ServerTime","StartVideoChatLinkCall","ZenonCallsModelTypes","useRoomIncomingCallDialog","useRTWebIncomingCallDialog","useRTWebIncomingUnsupportedBrowserDialog","useRTWebMissedCallDialog","useZenonDialogController"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.invite;a=b("Actor").useActor();var d=a[0];a=g.useContext(b("RTWebPreCallContext"));var e=b("useRTWebIncomingCallDialog")(),f=b("useRoomIncomingCallDialog")(),h=b("useRTWebMissedCallDialog")(),i=b("useRTWebIncomingUnsupportedBrowserDialog")(),j=b("RTWebPreCallHooks").useAcceptCallCallback(),k=b("RTWebPreCallHooks").useStartCallCallback(),l=a?a.callInviteModel:null;b("useZenonDialogController")(c,function(){if(c===null||l==null)return null;if(c.context.type==="room"){var a=c.context.room;return f({inviterID:c.inviterID,linkUrl:a.linkHash,onAccept:function(){b("StartVideoChatLinkCall").startCall(a.linkHash,!0,!0)},onDecline:function(){l.decline(b("ZenonCallsModelTypes").ZenonEndCallReason.IgnoreCall)},roomName:a.roomName,sender:c.context.room.sender})}switch(c.type){case"ringing":return e({inviterID:c.inviterID,isVideoCall:c.requestingVideo,onAccept:function(){j({trigger:"comet_incoming_dialog_accept_button"})},onDecline:function(){l.decline(b("ZenonCallsModelTypes").ZenonEndCallReason.IgnoreCall)},participantIDs:c.participants});case"missed":if(c.context.type==="thread"){var g=c.context.thread;return h({inviterID:c.inviterID,isVideoCall:c.requestingVideo,onCallback:function(){k({existingCall:null,invitees:[c.inviterID].concat(c.participants.filter(function(a){return a!==d})),mediaType:c.requestingVideo?"video":"audio",thread:g,trigger:"comet_missed_call_dialog"}),l.dismiss()},participantIDs:c.participants,timeMissed:new Date(b("ServerTime").getMillis())})}return null;case"unsupported_browser":return i({inviterID:c.inviterID,isVideoCall:c.requestingVideo,onClose:function(){l.dismiss()},participantIDs:c.participants,threadType:c.context.type==="thread"?c.context.thread.type:2});default:return null}});return null}}),null);
__d("useZenonRingTone",["React","RTCSounds","Sound"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=[b("RTCSounds").ringtone_mp3_url,b("RTCSounds").ringtone_ogg_url];function a(a){a===void 0&&(a=!1),g.useEffect(function(){if(a){b("Sound").play(h,null,!0);return function(){b("Sound").stop(h)}}},[a])}}),null);
__d("ZenonCallInviteRingtone.react",["useZenonRingTone"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){a=a.invite;b("useZenonRingTone")((a==null?void 0:a.type)==="ringing");return null}}),null);
__d("useDocumentTitleBlink",["DocumentTitle","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){g.useEffect(function(){if(a==null)return;var c=b("DocumentTitle").blink(a);return function(){c.stop()}},[a])}}),null);
__d("ZenonCallInviteTitleBlinking.react",["fbt","React","ZenonUsersHooks","useDocumentTitleBlink"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){a=a.invite;return a!==null&&a.type==="ringing"&&a.inviterID!=null?h.jsx(i,{inviterID:a.inviterID}):null}function i(a){a=a.inviterID;a=b("ZenonUsersHooks").useZenonUser(a);b("useDocumentTitleBlink")(a?g._("{name} appelle",[g._param("name",a.shortName)]):null);return null}}),null);
__d("useZenonDialogSetters",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,b){return g.useMemo(function(){return{hide:function(){a(null)},hideAll:function(){a(null),b([])},hideByID:function(a){b(function(b){return b.filter(function(b){return b.key!==a})})},show:a,showByID:function(a,c){b(function(b){var d=b.findIndex(function(b){return b.key===a}),e={key:a,node:c};if(d===-1)return[].concat(b,[e]);else return[].concat(b.slice(0,d),b.slice(d+1),[e])})},toggle:function(b){b===void 0&&(b=!1),b||a(null)}}},[a,b])}}),null);
__d("ZenonDialogProvider.react",["React","ZenonDialogContext","useZenonDialogSetters"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.children;var c=g.useState(null),d=c[0];c=c[1];var e=g.useState([]),f=e[0];e=e[1];c=b("useZenonDialogSetters")(c,e);return g.jsxs(b("ZenonDialogContext").Provider,{value:c,children:[a,d,f.map(function(a){a=a.node;return a})]})}}),null);
__d("RTWebCometCallInviteController.react",["React","RTWebCallBlockSettingHooks","RTWebCallInviteDesktopNotification.react","RTWebCometCallInviteDialogs.react","RTWebPreCallHooks","ZenonCallInviteRingtone.react","ZenonCallInviteTitleBlinking.react","ZenonDialogProvider.react","requireDeferred"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");c=b("requireDeferred")("FBRTCCallSummaryUploader");c.onReady(function(a){a.init()});function a(){b("RTWebCallBlockSettingHooks").useCallBlockSetting();b("RTWebPreCallHooks").useNoAnswerTimeout();var a=b("RTWebPreCallHooks").useCallInvite();return g.jsxs(b("ZenonDialogProvider.react"),{children:[g.jsx(b("RTWebCometCallInviteDialogs.react"),{invite:a}),g.jsx(b("RTWebCallInviteDesktopNotification.react"),{invite:a}),g.jsx(b("ZenonCallInviteRingtone.react"),{invite:a}),g.jsx(b("ZenonCallInviteTitleBlinking.react"),{invite:a})]})}}),null);
__d("RTWebCallWindowOpener",["requireCond","cr:1099565"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1099565")}),null);
__d("RTWebCometIncomingCallContent.react",["fbt","CometProgressIndicator.react","React","RTWebCometCallMessageLayout.react","ZenonUsersHooks","emptyFunction","gkx","requireCond","cr:1568669","cr:1568670"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("cr:1568669")?b("cr:1568669").addPoint:b("emptyFunction"),j=b("cr:1568670")?b("cr:1568670").useCallInvite:b("emptyFunction"),k=b("gkx")("1536863")?c:b("emptyFunction");function a(a){var c=a.inviterID,d=a.isVideoCall;a=a.participantIDs;c=b("ZenonUsersHooks").useZenonUser(c);var e=b("ZenonUsersHooks").useZenonUsers(a).valueSeq().toArray();k(e,a,64225282);a=a.length>1;var f=a?d?g._("{caller name} vous invite \u00e0 une discussion vid\u00e9o de groupe.",[g._param("caller name",c==null?void 0:c.name)]):g._("{caller name} vous invite \u00e0 un appel de groupe.",[g._param("caller name",c==null?void 0:c.name)]):g._("{caller name} vous appelle.",[g._param("caller name",c==null?void 0:c.name)]);a=a?d?g._("Votre vid\u00e9o sera partag\u00e9e d\u00e8s que vous r\u00e9pondrez"):g._("L\u2019appel commencera d\u00e8s que vous r\u00e9pondrez."):g._("L\u2019appel commencera d\u00e8s que vous r\u00e9pondrez.");return c===null?h.jsx(b("CometProgressIndicator.react"),{}):h.jsx(b("RTWebCometCallMessageLayout.react"),{caller:c,mainMessage:f,participants:e,subMessage:a})}function c(a,b,c){var d=l();h.useEffect(function(){a.length===0&&i(c,"fetching_participants",{instanceKey:d}),a.length===b.length&&i(c,"fetched_participants",{instanceKey:d})},[d,b.length,a,c])}function l(){var a=j();return(a=+(a==null?void 0:a.ringID))!=null?a:0}}),null);
__d("ZenonCallInviteModelTypes",[],(function(a,b,c,d,e,f){"use strict";a={missed:"missed",ringing:"ringing",unsupported_browser:"unsupported_browser"};f.CallInviteModelType=a}),null);
__d("ZenonCallInviteModel",["BaseEventEmitter","FBLogger","ZenonCallInviteModelTypes","ZenonCallsModelTypes","ZenonIncomingRingSDKTypes","gkx"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$ZenonCallInviteModel3=function(a){b("FBLogger")("rtc_www").info("Received cancel for: ",a.ringID);if(d.__currentRequest&&d.__currentRequest.model&&d.__currentRequest.model.ringID===a.ringID)switch(a.reason){case b("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup:a=((a=d.__currentRequest)==null?void 0:(a=a.model)==null?void 0:a.type)!==b("ZenonCallInviteModelTypes").CallInviteModelType.unsupported_browser;d.__currentRequest.model=babelHelpers["extends"]({},d.__currentRequest.model,{type:"missed"});a&&d.emit("callInvite",d.__currentRequest.model);break;case b("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss:d.dismiss();break}};d.$ZenonCallInviteModel2=function(a){var c;b("FBLogger")("rtc_www").info("Receiving ring: ",a.ringID);if(((c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.type)==="ringing"){if(((c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.ringID)!==a.ringID&&b("gkx")("1434282")){a.onDecline(b("ZenonCallsModelTypes").ZenonEndCallReason.InAnotherCall);b("FBLogger")("rtc_www").info("Sending InAnotherCall to ring: ",a.ringID,"Current ring: ",(c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.ringID)}}else d.__currentRequest={model:{context:a.context,controllerParams:a.controllerParams,inviterID:a.inviterID,participants:a.otherParticipants,requestingVideo:a.requestingVideo,ringID:a.ringID,type:a.isClientPermissableRing?"ringing":"unsupported_browser"},ringPayload:a},d.emit("callInvite",d.__currentRequest.model),a.isClientPermissableRing||a.onDecline(b("ZenonCallsModelTypes").ZenonEndCallReason.VersionUnsupported)};d.__eventSource=c;d.__currentRequest=null;return d}var d=c.prototype;d.getCurrentInvite=function(){var a;return(a=(a=this.__currentRequest)==null?void 0:a.model)!=null?a:null};d.startListening=function(a){a=a.callsBlocked;this.__currentRequest&&this.dismiss();this.stopListening();a?this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel1):(this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel2),this.__eventSource.addListener("ringCancel",this.$ZenonCallInviteModel3))};d.stopListening=function(){this.__eventSource.removeAllListeners("incomingRing"),this.__eventSource.removeAllListeners("ringCancel"),this.__currentRequest=null};d.dismiss=function(){var a;b("FBLogger")("rtc_www").info("Dismissing ring: ",(a=this.__currentRequest)==null?void 0:(a=a.model)==null?void 0:a.ringID);this.__currentRequest=null;this.emit("callInvite",null)};d.accept=function(a,c){var d=this.__currentRequest;if(d){var e;b("FBLogger")("rtc_www").info("Accepting ring: ",(e=d.model)==null?void 0:e.ringID);((e=d.model)==null?void 0:e.type)==="ringing"&&d.ringPayload.onAccept(a,c);this.dismiss()}};d.decline=function(a,c){a===void 0&&(a=b("ZenonCallsModelTypes").ZenonEndCallReason.IgnoreCall);var d=this.__currentRequest;if(d){var e;b("FBLogger")("rtc_www").info("Declining ring: ",(e=d.model)==null?void 0:e.ringID);d.ringPayload.onDecline(a,c);this.dismiss();return}};d.$ZenonCallInviteModel1=function(a){b("FBLogger")("rtc_www").info("Blocking ring: ",a.ringID),a.onDecline(b("ZenonCallsModelTypes").ZenonEndCallReason.IgnoreCall,b("ZenonCallsModelTypes").ZenonEndCallSubreason.CallsBlocked)};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("delegateZenonCallInviteModel",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){a.getCurrentInvite=b.getCurrentInvite.bind(b),a.startListening=b.startListening.bind(b),a.stopListening=b.stopListening.bind(b),a.dismiss=b.dismiss.bind(b),a.accept=b.accept.bind(b),a.decline=b.decline.bind(b),b.addListener("callInvite",function(b){a.emit("callInvite",b)})}}),null);
__d("ZenonCallWindowController",["Promise","FBLogger","ZenonCallWindowErrors"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c=b.callWindowInitializerResource,d=b.callWindowOpener;b=b.uriBuilderResource;this.$2=null;this.$3=!1;this.$5=null;this.$1=a;this.$7=b;this.$4=c;this.$6=d}var c=a.prototype;c.initCall=function(a){var c=this;if(this.$3)throw new(b("ZenonCallWindowErrors").OpeningAnotherCallError)();try{if(this.$2&&!this.$2.closed&&a.joinContext.type==="thread"&&this.$2.inCallWith===a.joinContext.thread.id){this.$2.focus();return[this.$2,b("Promise").resolve({alohaEscalatedMW:!1})]}}catch(a){b("FBLogger")("rtc_www").catching(a).warn("Failed to access inCallWith on call window")}var d=this.$6.openWindow(a);try{this.$2&&(this.$2.closed||this.$2.close(),this.$2=null)}catch(a){b("FBLogger")("rtc_www").catching(a).warn("Failed to access close on call window")}this.$2=d;this.$3=!0;return[d,b("Promise").all([this.$7.load(),this.$4.load()]).then(function(b){var d=b[0];b=b[1];c.$5===null&&(c.$5=new b(c.$1,new d(c.$1)));return c.$5.initCall(c.$2,a)})["finally"](function(){c.$3=!1})]};return a}();e.exports=a}),null);
__d("ZenonDeviceInfoHelper",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=-1,h=!1,i={getBatteryStats:function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(i.internalGetWindow().navigator.getBattery);case 2:a=d.sent;if(!(typeof a!=="function")){d.next=5;break}return d.abrupt("return",{level:g,placeholder:!0,wasCharged:!1});case 5:d.next=7;return b("regeneratorRuntime").awrap(a.call(navigator));case 7:c=d.sent;c.charging?h=!0:c.onchargingchange=function(a){a.target.charging&&(h=!0),a.target.onchargingchange=null};return d.abrupt("return",{level:c.level*100,placeholder:!1,wasCharged:h});case 10:case"end":return d.stop()}},null,this)},internalGetWindow:function(){return window}};a=i;e.exports=a}),null);
__d("ZenonDeviceInfoUtils",["UserAgentData"],(function(a,b,c,d,e,f){"use strict";f.getDeviceSoftwareInfo=a;function a(){var a=b("UserAgentData").browserName,c=b("UserAgentData").platformName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(c+=" Mobile",a==="Chrome"&&(a="Mobile "+a));window.external&&window.external.pinPage&&(a==="Chrome"&&(a+=" Edge"));return{browser:a,browser_version:b("UserAgentData").browserFullVersion,device:b("UserAgentData").deviceName,os:c,os_version:b("UserAgentData").platformFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}}}),null);
__d("ZenonVCSTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",MWS:"mws",VOIP:"voip"});f.ZenonCallType=a;c=b("$InternalEnum")({LL_BASIC:1,LL_DEBUG:2,LL_INFO:4,LL_NIL:0,LL_VERBOSE:5,LL_WARNING:3});f.ZenonUploadLogLevel=c}),null);
__d("ZenonCallSummary",["regeneratorRuntime","ChannelClientID","FBRTCExperiment","FBRTCLocalUploadLogLevel","SiteData","WebPerformanceDeviceInfo","ZenonCallSummaryStore","ZenonCallSummaryUploader","ZenonDeviceInfoHelper","ZenonDeviceInfoUtils","ZenonDismissReason","ZenonSignalingTypes","ZenonVCSTypes","gkx","performanceNow","uuid"],(function(a,b,c,d,e,f){"use strict";var g,h={PRESSED_ANSWER:"p_a"};function i(a){var c=b("FBRTCExperiment").gen("rtweb_zenon_platform");c=c.getBool("use_zenon_platform",!1,!1);var d=b("gkx")("1845186");c=c||d;if((a===b("ZenonSignalingTypes").ZenonSignalingProtocol.MW||a===b("ZenonSignalingTypes").ZenonSignalingProtocol.MWPP)&&c)return"ZenonPlatform";d=b("gkx")("1341692");a=b("gkx")("1680228");return!d&&!a?"ZenonScotch":"Old Codebase"}var j=19,k=24,l={CALL_CONNECTED:"connected",CALL_ENDED:"ended",CALL_STARTED:"started",NETWORK_READY:"network_ready",PROC_JOIN_RESPONSE:"p_jresp",RECV_ANSWER:"r_a",RECV_ANSWER_ACK:"r_aack",RECV_JOIN_RESPONSE:"r_jresp",RECV_OFFER:"r_o",RECV_OFFER_ACK:"r_oack",RECV_OK:"r_ok",RECV_PRANSWER:"r_pr",RECV_RETRIED_ANSWER:"r_a2",RECV_RETRIED_ANSWER_ACK:"r_aack2",RECV_RETRIED_OFFER:"r_o2",RECV_RETRIED_OFFER_ACK:"r_oack2",RECV_RING_REQUEST:"r_rreq",SENT_ANSWER:"s_a",SENT_ANSWER_ACK:"s_aack",SENT_JOIN_REQUEST:"s_jreq",SENT_OFFER:"s_o",SENT_OFFER_ACK:"s_oack",SENT_OK:"s_ok",SENT_PRANSWER:"s_pr",SENT_RETRIED_ANSWER:"s_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",SENT_RETRIED_OFFER:"s_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",SENT_RING_RESPONSE:"s_rresp"},m={BATTERY_END:"battery_end",BATTERY_START:"battery_start",DESKTOP_DEVICE_CLASS:"desktop_device_class",DEVICE_INFO:"device_info",INITIATED_BY_APP_ID:"initiated_by_app_id",INITIATED_BY_PAGE_ID:"initiated_by_page_id",MAX_CONCURRENT_CONNECTED_PARTICIPANTS:"max_concurrent_connected_participants",PEER_IS_MOBILE:"peer_is_mobile",RATING:"rating5",RATING_SHOWN:"rating_shown",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",YEAR_CLASS:"year_class"};a=function(){function a(a){var c=a.callID,d=a.callTrigger,e=a.isCaller,f=a.isVideo,h=a.localCallID,j=a.peerID,l=a.protocol;a=a.uploadLogLevel;this.$25=0;this.$26=0;this.$31={};this.$32={};this.$33={};this.$34={};this.$35=!1;this.$37=0;this.$38=!1;this.$39={};this.$40={};this.$41={};this.$42={};this.$48={CoreAudioMetrics:{isstall:0},DebugAudioMetrics:{NetworkReceive:{}},extraInfo:{},receiver:{},sender:{},video:{}};this.$50={};this.$51={};this.$52="sfu";this.$54={};this.$1=j;this.$2=c;this.localCallID=(j=h)!=null?j:b("uuid")();this.$3=b("ChannelClientID").getID();this.$5=e;this.$4=k;this.$8=i(l);this.$6=(c=a)!=null?c:b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel();this.$7=d;this.$28=new Date().valueOf();this.$9=l===b("ZenonSignalingTypes").ZenonSignalingProtocol.P2P?"p2p":"mws";this.$21=null;this.$20=null;this.$36=this.$1==="MW_PEER_ID";this.$16=b("SiteData").push_phase;this.$9==="p2p"?this.setCallType(f?b("ZenonVCSTypes").ZenonCallType.DIRECT_VIDEO:b("ZenonVCSTypes").ZenonCallType.VOIP):this.setCallType(b("ZenonVCSTypes").ZenonCallType.MWS);this.$30=(g||(g=b("performanceNow")))();this.$29=0;this.$27=this.$30;this.$53=0;this.$54[m.DEVICE_INFO]=b("ZenonDeviceInfoUtils").getDeviceSoftwareInfo();this.updateBatteryStart();this.$56();this.$57()}a.$58=function(a){try{return JSON.parse(a)}catch(a){return null}};a.fromJsonString=function(c){var d;c=this.$58(c);if(c==null)return null;if(c.version<j)return null;if(!Object.prototype.hasOwnProperty.call(c,"peerID")||!Object.prototype.hasOwnProperty.call(c,"callID")||!Object.prototype.hasOwnProperty.call(c,"isCaller")||!Object.prototype.hasOwnProperty.call(c,"startTime")||!Object.prototype.hasOwnProperty.call(c,"trigger")||!Object.prototype.hasOwnProperty.call(c,"signalingTime")||!Object.prototype.hasOwnProperty.call(c,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(c,"lastSerializedTime"))return null;var e=c.activeConn==="p2p"?b("ZenonSignalingTypes").ZenonSignalingProtocol.P2P:b("ZenonSignalingTypes").ZenonSignalingProtocol.MW;e=new a({callID:c.callID,isCaller:c.isCaller,isVideo:c.callType===b("ZenonVCSTypes").ZenonCallType.DIRECT_VIDEO,localCallID:c.localCallID,peerID:c.peerID,protocol:e});e.$3=c.deviceID;e.$4=c.version;e.$6=c.uploadLogLevel;e.$28=c.startTime;e.$7=c.trigger;e.$52=c.mediaMode;e.$36=c.isUsingMultiway;e.$35=c.hasOfferInRingRequest;e.$37=(d=c.renegotiationCmuRequestSent)!=null?d:0;e.$8=c.clientVersion;e.$31=c.signalingTime;e.$17=c.endCallReason;e.$18=c.endCallSubreason;e.$19=c.isRemoteEnded;e.$25=c.lastUpdatedTime;e.$26=c.lastSerializedTime;e.$11=c.joinWithSID;e.$21=(d=c.endIsConnected)!=null?d:null;e.$20=(d=c.pcIsConnected)!=null?d:null;e.$38=c.hasAnswerInJoinResponse;c.conferenceName!=null&&(e.$10=c.conferenceName);c.escP2PCallID!=null&&(e.$12=c.escP2PCallID);c.activeConn!=null&&(e.$9=c.activeConn);c.serverInfoData!=null&&(e.$14=c.serverInfoData);c.localVideoDuration!=null&&(e.$43=c.localVideoDuration);c.remoteVideoDuration!=null&&(e.$44=c.remoteVideoDuration);c.unsetOnRetrieve!=null&&(e.$24=c.unsetOnRetrieve);c.openCount!=null&&(e.$53=c.openCount);c.extraInfo&&(e.$54=c.extraInfo);c.gen0IceSentCount&&(e.$39=c.gen0IceSentCount);c.gen0IceReceivedCount&&(e.$40=c.gen0IceReceivedCount);c.iceConnections&&(e.$50=c.iceConnections);c.iceSentCount&&(e.$41=c.iceSentCount);c.iceReceivedCount&&(e.$42=c.iceReceivedCount);c.pcConnectionStates&&(e.$51=c.pcConnectionStates);c.accumulatedCallTime!=null&&(e.$29=c.accumulatedCallTime);c.escStateTimes&&(e.$32=c.escStateTimes);c.applicationEventTime&&(e.$33=c.applicationEventTime);c.videoEscTimes&&(e.$34=c.videoEscTimes);c.mediaStats&&(e.$48=c.mediaStats);c.connectionType!==void 0&&(e.$22=c.connectionType);c.deviceCharged!=null&&(e.$55=c.deviceCharged);c.videoReceivedCodec!==null&&(e.$45=c.videoReceivedCodec);c.videoSentCodec!==null&&(e.$46=c.videoSentCodec);c.audioSentCodec!==null&&(e.$47=c.audioSentCodec);c.relayIP!==null&&c.relayIP!==void 0&&(e.$23=c.relayIP);c.startReach!=null&&(e.$49=c.startReach);c.sdpFormat!=null&&(e.$15=c.sdpFormat);return e};var c=a.prototype;c.toJsonString=function(){var a;this.$26=new Date().valueOf();a={accumulatedCallTime:this.$59(),activeConn:(a=this.$9)!=null?a:"p2p",applicationEventTime:this.$33,audioSentCodec:this.$47,callID:this.$2,callType:this.$13,clientVersion:this.$8,conferenceName:this.$10,connectionType:this.$22,deviceCharged:this.$55,deviceID:this.$3,endCallReason:this.$17,endCallSubreason:this.$18,endIsConnected:this.$21,escP2PCallID:this.$12,escStateTimes:this.$32,extraInfo:this.$54,gen0IceReceivedCount:this.$40,gen0IceSentCount:this.$39,hasAnswerInJoinResponse:this.$38,hasOfferInRingRequest:this.$35,iceConnections:this.$50,iceReceivedCount:this.$42,iceSentCount:this.$41,isCaller:this.$5,isRemoteEnded:this.$19,isUsingMultiway:this.$36,joinWithSID:this.$11,lastSerializedTime:this.$26,lastUpdatedTime:this.$25,localCallID:this.localCallID,localVideoDuration:this.$43,mediaMode:this.$52,mediaStats:this.$48,pcConnectionStates:this.$51,pcIsConnected:this.$20,peerID:this.$1,relayIP:this.$23,remoteVideoDuration:this.$44,renegotiationCmuRequestSent:this.$37,sdpFormat:this.$15,serverInfoData:this.$14,signalingTime:this.$31,startReach:this.$49,startTime:this.$28,trigger:this.$7,unsetOnRetrieve:this.$24,uploadLogLevel:this.$6,version:this.$4,videoEscTimes:this.$34,videoReceivedCodec:this.$45,videoSentCodec:this.$46};return JSON.stringify(a)};c.unsetEndCallFields=function(){this.$17=null,this.$18=null,this.$19=null,this.$21=null,delete this.$31[l.CALL_ENDED],this.$30=0,this.$24=null};c.isNull=function(){return this.$1==="0"&&this.$2==="0"&&!this.$5&&this.$7==="NULL_SUMMARY"};c.getExtraInfo=function(){return this.$54};c.getLastUpdatedTime=function(){return this.$25};c.getMediaStats_DEBUG=function(){return this.$48};c.getDeviceID=function(){return this.$3};c.setDeviceID=function(a){this.$3=a};c.getSdpFormat=function(){return this.$15};c.setSdpFormat=function(a){this.$15=a};c.getLoggingArgs=function(){var a;return{call_id:this.$2,conf_name:(a=this.$10)!=null?a:"",peer_id:isNaN(this.$1)?null:this.$1,serv_info:(a=this.$14)!=null?a:"",web_device_id:this.$3}};c.getDeviceCharged=function(){return this.$55};c.setDeviceCharged=function(a){this.$55!==!0&&(this.$55=a)};c.save=function(a){a.storeCallSummary(this.$1,this.$2,this),this.$27=(g||(g=b("performanceNow")))()};c.onCallAccepted=function(a){this.$33[h.PRESSED_ANSWER]=this.$59(),this.$7=a,this.$57()};c.onCallJoinRequest=function(a){this.$35=a,this.$36=this.$1==="MW_PEER_ID",this.$57()};c.onCallConnected=function(a){this.$60(l.CALL_CONNECTED),this.$52=a,this.$57()};c.onCallEscalated=function(a){this.$52==="p2p"&&a==="sfu"?this.$52="p2p_sfu_escalated":this.$52=a,this.$37=this.$59(),this.$57()};c.onCallEnded=function(a,b,c,d){this.$24=c,this.$17=a,this.$18=d,this.$19=b,this.$60(l.CALL_ENDED),this.$21===null&&(this.$21=this.$20),this.$57()};c.setPCIsConnected=function(a){this.$20!==a&&(this.$20=a,this.$51[this.$59()]=a)};c.onInviteResponded=function(){var a=this.$9==="p2p"?l.SENT_OFFER_ACK:l.SENT_RING_RESPONSE;this.$60(a);this.$57()};c.onInviteReceived=function(){var a=this.$9==="p2p"?l.RECV_OFFER:l.RECV_RING_REQUEST;this.$60(a);this.$57()};c.onInviteSent=function(){this.$60(l.SENT_JOIN_REQUEST),this.$57()};c.onInviteResponseReceived=function(){this.$60(l.RECV_JOIN_RESPONSE),this.$57()};c.onInviteResponseProcessed=function(){this.$60(l.PROC_JOIN_RESPONSE),this.$57()};c.onMediaConnected=function(){this.$60(l.NETWORK_READY),this.$57()};c.setIsPeerMobile=function(a){this.$54[m.PEER_IS_MOBILE]=a?"1":"0",this.$57()};c.setCallType=function(a){this.$13=a,this.$57()};c.setConferenceName=function(a){this.$10=a,this.$57()};c.setConnectionType=function(a){this.$22=a,this.$57()};c.setInitByPageID=function(a){this.$54[m.INITIATED_BY_PAGE_ID]=a,this.$57()};c.setInitByAppID=function(a){a!=null&&(this.$54[m.INITIATED_BY_APP_ID]=a,this.$57())};c.setJoinWithSID=function(a){this.$11=a,this.$57()};c.setMediaStats=function(a){this.$48=a;this.$39&&(this.$48.sender.ice_g0=this.$39);this.$41&&(this.$48.sender.ice=this.$41);this.$40&&(this.$48.receiver.ice_g0=this.$40);this.$42&&(this.$48.receiver.ice=this.$42);a=a.extraInfo;var b=a.localIceCandidate;a=a.remoteIceCandidate;if(b){(this.$49==null||this.$49==="")&&(this.$49=b.networkType);if(a){var c=b.candidateType;b=b.protocol;var d=a.candidateType;a=a.protocol;if(c!=null&&b!=null&&d!=null&&a!=null){c="l:"+c+"-"+b+";r:"+d+"-"+a;this.$50[c]==null&&(this.$50[c]=this.$59())}}}this.updateBatteryEnd();this.$57()};c.setServerInfoData=function(a){this.$14=a,this.$57()};c.setRating=function(a){this.$54[m.RATING]=a,this.$57()};c.setFeedback=function(a){this.$54[m.SURVEY_DETAILS]=a,this.$57()};c.setSurveyChoice=function(a){this.$54[m.SURVEY_CHOICE]=a,this.$57()};c.setMaxConnectedParticipants=function(a){this.$54[m.MAX_CONCURRENT_CONNECTED_PARTICIPANTS]=a,this.$57()};c.setHasAnswerInJoinResponse=function(a){this.$38=a,this.$57()};c.$60=function(a){if(this.$31[a]!=null)return;this.$31[a]=this.$59()};c.$59=function(){var a=(g||(g=b("performanceNow")))()-this.$30;return Math.floor(this.$29+a)};c.$57=function(){this.$25=new Date().valueOf()};c.$56=function(){var a=b("WebPerformanceDeviceInfo").getMobileYearClass();a!=null&&a>0?this.$54[m.YEAR_CLASS]=a:this.$54[m.DESKTOP_DEVICE_CLASS]=b("WebPerformanceDeviceInfo").getDeviceLevel()};c.updateBatteryStart=function(){var a,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(b("ZenonDeviceInfoHelper").getBatteryStats());case 2:a=e.sent,c=a.level,d=a.placeholder,d!==!0&&(this.$54[m.BATTERY_START]=c);case 6:case"end":return e.stop()}},null,this)};c.updateBatteryEnd=function(){var a,c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(b("ZenonDeviceInfoHelper").getBatteryStats());case 2:a=f.sent,c=a.level,d=a.placeholder,e=a.wasCharged,d!==!0&&(this.$54[m.BATTERY_END]=c,this.setDeviceCharged(e));case 7:case"end":return f.stop()}},null,this)};c.toString=function(){var a={core_metrics:this.$61(),time_series:null};return JSON.stringify(a)};c.$61=function(){return{CoreAudioMetrics:this.$48.CoreAudioMetrics,DebugAudioMetrics:this.$48.DebugAudioMetrics,active_conn:this.$9,answer_in_join_resp:this.$38,app_event_times:this.$33,call_type:this.$13,caller:this.$5,client_version:this.$8,conf_name:this.$10,conn:this.$62(),device_charged:this.$55,end:this.$63(),esc_p2p_call_id:this.$12,esc_state_times:this.$32,is_using_multiway:this.$36,join_with_sid:this.$11,log_level:this.$64(b("ZenonVCSTypes").ZenonUploadLogLevel.cast(this.$6)),offer_in_ring_req:this.$35,open_count:this.$53,peer_id:isNaN(this.$1)?null:this.$1,perf:this.$65(),push_phase:this.$16,receiver:this.$48.receiver,sdp_reneg_times:[{crs:this.$37}],sender:this.$48.sender,serv_info:this.$14,signaling:this.$66(),ver:this.$4,vid_esc_times:this.$34,video:this.$48.video}};c.$64=function(a){if(a==null)return"";switch(a){case b("ZenonVCSTypes").ZenonUploadLogLevel.LL_BASIC:return"basic";case b("ZenonVCSTypes").ZenonUploadLogLevel.LL_DEBUG:return"debug";case b("ZenonVCSTypes").ZenonUploadLogLevel.LL_WARNING:return"warning";case b("ZenonVCSTypes").ZenonUploadLogLevel.LL_INFO:return"info";case b("ZenonVCSTypes").ZenonUploadLogLevel.LL_VERBOSE:return"verbose";default:return""}};c.$62=function(){var a={},b=this.$48.sender,c=b.avgrtt,d=b.maxrtt;b=b.minrtt;c!=null&&(a.avgrtt=c,a.maxrtt=d,a.minrtt=b);this.$23!=null&&(a.relay_ip=this.$23);this.$49!=null&&this.$49!==""&&(a.start_reach=this.$49);var e={};Object.entries(this.$50).forEach(function(a){var b=a[0];a=a[1];typeof a==="number"&&(e[a]=b)});a.types=e;a.ctd=this.$51;return a};c.$66=function(){var a={start_time:this.$28,time_from_start:this.$31};this.$7!=null&&(a.trigger=this.$7);var b=this.$67();b>0&&(a.duration=b);return a};c.$67=function(a){var b=this.$31[l.CALL_CONNECTED]||this.$31[l.NETWORK_READY];if(!b)return 0;a=this.$31[l.CALL_ENDED]||!(a==null?void 0:a.assumeOngoing)&&this.$29||this.$59();return Math.max(0,a-b)};c.$63=function(){var a,c={};this.$17!=null&&(c.end_call_reason_string=b("ZenonDismissReason").dismissToEndCallReason(this.$17),this.$18!==null&&(c.end_call_subreason_string=this.$18),c.remote_ended=this.$19,c.end_ctd=this.$21);this.$22!=null&&(c.conn_type=this.$22);a=(a=this.$48.extraInfo)!=null?a:{};a=a.localIceCandidate;a&&a.networkType!==""&&(c.reach=a.networkType);return c};c.$65=function(){var a,b,c=this.$67();if(c<=0)return;a=(a=(a=this.$48.video.receiver)==null?void 0:a.tdt)!=null?a:0;b=(b=(b=this.$48.video.sender)==null?void 0:b.tet)!=null?b:0;a=a+b;b=Math.round(100*(a/c));return{cpu:{proc:{avg:b}}}};c.uploadLog=function(){b("ZenonCallSummaryUploader").logCallSummary({callID:this.$2,callSummary:this,peerID:this.$1})};return a}();e.exports=a}),null);
__d("ZenonGenericCallSummaryStore",["CacheStorage","areEqual","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g,h=2e3,i=3;a=function(){function a(a,c,d){this.$1=a,this.$2=new(b("CacheStorage"))(c,d)}var c=a.prototype;c.getCallSummaries=function(){return this.$2.get(this.$1)||{}};c.removeCallSummaries=function(a){this.mutateCallSummaries(function(b){a.forEach(function(a){var c=a.callID;a=a.peerID;b[a]&&b[a][c]&&(delete b[a][c],Object.entries(b[a]).length===0&&delete b[a])});return b})};c.mutateCallSummaries=function(a,c,d){var e=this;c===void 0&&(c=i);d===void 0&&(d=!1);var f=this.getCallSummaries(),j=this.getCallSummaries();f=a(f);var k=this.getCallSummaries();(g||(g=b("areEqual")))(j,k)?this.$2.set(this.$1,f):c>0&&(d?b("setTimeout")(function(){e.mutateCallSummaries(a,c-1,!0)},h):this.mutateCallSummaries(a,c-1,!0))};return a}();e.exports=a}),null);
__d("ZenonCallSummaryStore",["FBLogger","ZenonCallSummary","ZenonGenericCallSummaryStore"],(function(a,b,c,d,e,f){"use strict";var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,i,g,h)||this}var d=c.prototype;d.retrieveCallSummary=function(a,c){var d=this.getCallSummaries();d=d[a]?d[a][c]:null;if(d)return b("ZenonCallSummary").fromJsonString(d.__d);else return null};d.storeCallSummary=function(a,c,d){if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid ZenonCallSummary!");return}this.mutateCallSummaries(function(b){b[a]||(b[a]={});b[a][c]={__d:d.toJsonString(),__t:Date.now(),__z:!0};return b})};return c}(b("ZenonGenericCallSummaryStore"));c=new a();f.ZenonCallSummaryStoreInstance=c}),null);
__d("ZenonCallSummaryUploader",["MarauderLogger","ScotchRTWebUserActionLogger","ZenonCallSummary","ZenonCallSummaryStore","gkx"],(function(a,b,c,d,e,f){"use strict";f.getLoggableSummaries=k;f.logCallSummaries=a;f.logCallSummary=c;var g=3*60*1e3,h="rtc_client_call_summary",i="webrtc";function j(a){var c=a.callID,d=a.callSummary;a=a.peerID;b("ScotchRTWebUserActionLogger").logCheckpoint({callID:c,checkpoint:"[ZP] Attempting to upload CallSummary"});var e=d.getMediaStats_DEBUG();if(b("gkx")("1847820")){var f;f=(f=(f=e.video)==null?void 0:(f=f.sender)==null?void 0:f.eqps)!=null?f:0;e=(e=(e=e.video)==null?void 0:(e=e.sender)==null?void 0:e.frames)!=null?e:0;var g=e!==0?f/e:0;b("ScotchRTWebUserActionLogger").logCheckpoint({checkpoint:"[zenon_senderVideoQp]:  eqps: "+f+", frames: "+e+", senderVideoQp: "+g})}f=isNaN(a)?null:a;e=babelHelpers["extends"]({call_id:c,channel_session_id:d.getDeviceID(),content:d.toString(),local_call_id:d.localCallID,peer_id:f,sdp_format:d.getSdpFormat(),tag:"endcallstats"},d.getExtraInfo());b("MarauderLogger").log(h,i,e,void 0,void 0,void 0,void 0,"vital");b("ScotchRTWebUserActionLogger").logCheckpoint({callID:c,checkpoint:"[ZP] Complete uploading CallSummary"})}function k(){var a=b("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.getCallSummaries(),c=[];for(var d in a)for(var e in a[d]){var f=a[d][e];if(f.__z){var h=f.__t;if(Date.now()-h>g){h=b("ZenonCallSummary").fromJsonString(f.__d);h&&c.push({callID:e,callSummary:h,peerID:d})}}}return c}function a(){var a=k(),c=[];a.forEach(function(a){var b=a.callID,d=a.callSummary;a=a.peerID;j({callID:b,callSummary:d,peerID:a});c.push({callID:b,peerID:a})});b("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.removeCallSummaries(c)}function c(a){var c=a.callID,d=a.callSummary;a=a.peerID;j({callID:c,callSummary:d,peerID:a});b("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.removeCallSummaries([{callID:c,peerID:a}])}}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore","ZenonCallSummaryUploader","requireCond","cr:1645710"],(function(a,b,c,d,e,f){f.init=a;function a(){var a=b("FBRTCCallSummaryStore").getInstance();b("Banzai").subscribe(b("Banzai").SEND,function(){b("ZenonCallSummaryUploader").logCallSummaries(),b("cr:1645710")==null?void 0:b("cr:1645710").logCallSummaries(),b("FBRTCCallSummary").logSavedSummaries(a)})}}),null);
__d("ZenonCallLogger",["ScotchRTWebUserActionLogger","gkx","uuid"],(function(a,b,c,d,e,f){"use strict";var g=new Set(["setMediaStats","infraAction"]);a=function(){function a(a,c){var d,e=this;this.$1=[];this.$2={localCallID:b("uuid")(),peerID:a.peerID,sharedCallID:(d=a.serverInfoData)!=null?d:a.callID};c.forEach(function(b){return e.$1.push(new b(a,function(a){Object.assign(e.$2,a)}))})}var c=a.prototype;c.log=function(a){!g.has(a.name)&&b("gkx")("1439080")&&b("ScotchRTWebUserActionLogger").logCheckpoint({checkpoint:"[ZP] ZenonCallLogger event: "+a.name}),this.$1.forEach(function(b){b.processEvent(a)})};c.getLogIdentifiers=function(){return this.$2};return a}();e.exports=a}),null);
__d("ZenonParentCallSummaryLogProcessor",["CurrentUser","FBRTCCallSummaryStore","ZenonCallSummary","ZenonDismissReason","ZenonSignalingTypes","gkx","pageID"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c){this.$2=b("FBRTCCallSummaryStore").getInstance(),this.$3=a.protocol,this.$3===b("ZenonSignalingTypes").ZenonSignalingProtocol.MW&&(a.peerID="MW_PEER_ID"),this.$1=new(b("ZenonCallSummary"))(a),c&&c({localCallID:this.$1.localCallID})}var c=a.prototype;c.$4=function(a){if(a!=null){a=a.deviceID;a=a==="mobile";this.$1.setIsPeerMobile(a)}};c.processEvent=function(a){switch(a.name){case"inviteResponded":this.$1.onInviteResponded();break;case"inviteReceived":this.$1.onInviteReceived();this.$4(a.remoteDeviceInfo);break;case"callEnded":this.$5(a);break;case"callAccepted":this.$1.onCallAccepted(a.trigger);this.$1.save(this.$2);break;case"popupOpened":this.$6(a);this.$1.save(this.$2);break}};c.$6=function(a){this.$1.setInitByPageID(b("pageID")),this.$1.setInitByAppID(b("CurrentUser").getAppID()),this.$1.onCallEnded(b("ZenonDismissReason").ZenonDismissReason.ClientError,!1,!0,a.isPopupBlocked?"PopupBlocked":"PopupPending"),this.$1.save(this.$2)};c.$5=function(a){if(this.$3===b("ZenonSignalingTypes").ZenonSignalingProtocol.MW&&a.isRemoteEnded)return;var c=a.endCallReason,d=a.endCallSubreason;a=a.isRemoteEnded;var e=b("gkx")("1148995");if(!e&&c===b("ZenonDismissReason").ZenonDismissReason.OtherInstanceHandled&&a)return;this.$1.onCallEnded(c,a,!1,d);this.$1.save(this.$2)};return a}();e.exports=a}),null);
__d("ZenonParentQPLLogProcessor",["QPLUserFlow"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.callID}var c=a.prototype;c.processEvent=function(a){switch(a.name){case"inviteReceived":b("QPLUserFlow").start(64225282,{instanceKey:+this.$1});break;case"callEnded":b("QPLUserFlow").endCancel(64225282,{instanceKey:+this.$1});break;case"callAccepted":b("QPLUserFlow").addPoint(64225282,"call_accepted",{instanceKey:+this.$1});break;case"inviteResponded":b("QPLUserFlow").addPoint(64225282,"invite_responded",{instanceKey:+this.$1});break;case"popupOpened":b("QPLUserFlow").endSuccess(64225282,{instanceKey:+this.$1});break}};return a}();e.exports=a}),null);
__d("ZenonCollisionContext",[],(function(a,b,c,d,e,f){"use strict";"use strict";f.getThreadIDAndTypeFromCollisionContext=a;function a(a){var b=null;a.groupThreadID!=null?b={id:a.groupThreadID,type:2}:a.peerID!=null&&(b={id:a.peerID,type:1});return b}}),null);
__d("LazyLoadInstance",["promiseDone"],(function(a,b,c,d,e,f){"use strict";var g={LOADING:1,NOT_READY:0,READY:2};a=function(){function a(a,b){this.$1={instantiate:b,moduleReference:a,stage:g.NOT_READY}}var c=a.prototype;c.get=function(a){switch(this.$1.stage){case g.NOT_READY:b("promiseDone")(this.$2(this.$1),a);break;case g.LOADING:b("promiseDone")(this.$1.instancePromise,a);break;case g.READY:a(this.$1.instance);break}};c.getNow=function(){return this.$1.stage===g.READY?this.$1.instance:null};c.preload=function(){this.$1.stage===g.NOT_READY&&this.$2(this.$1)};c.$2=function(a){var b=this,c=a.instantiate;a=a.moduleReference;a=a.load().then(function(a){a=c(a);b.$1={instance:a,stage:g.READY};return a});this.$1={instancePromise:a,stage:g.LOADING};return a};return a}();e.exports=a}),null);
__d("ZenonParentSignalingClient",["ZenonDebugLogger","ZenonSignalingTypes","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e){var f=this;this.remoteSignalingID=null;this.$4="init";this.$6=null;this.$7=null;this.$8=function(){};this.$9=function(a,c,d){b("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",f.$4,"received "+a.eventName,f.$1.getSignalingID());switch(a.eventName){case"inviteRequest":f.$11(a,c,d);break;case"remoteSdpRequest":f.$12(a,c);break;case"terminateRequest":f.$13(a,c,d);break}};this.$1=a;this.$3=d;this.$5=e;this.$2=c;c.setReceiver(this.$9);b("ZenonDebugLogger").getInstance().startQPL(64234815,+a.getSignalingID())}var c=a.prototype;c.setSignalingEventHandlers=function(a){if(this.$6!=null){b("recoverableViolation")("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.","rtc_www");return}this.$6=a};c.setLoggingEventHandler=function(a){this.$8=a};c.getSignalingModel=function(){return this.$1};c.sendDismiss=function(a){this.$4="terminated";a={eventName:"terminateRequest",fromJoinResponse:!1,reason:a,shouldInformPeer:!0};this.$10(a)};c.receiveMessage=function(a){this.$2.receiveMessage(a)};c.isTerminated=function(){return this.$4==="terminated"};c.sendAnswerIntent=function(){if(this.$4==="inviteAcknowledged"){this.$4="answered";var a={eventName:"answerIntentRequest"};this.$10(a)}else throw b("unrecoverableViolation")("sendAnswerIntent called in unexpected state "+this.$4,"rtc_www")};c.respondToInvite=function(a){if(this.$4==="inviteReceived"){if(this.$7==null)throw b("unrecoverableViolation")("respondToInvite called without inviteMessageId being populated first","rtc_www");this.$4="inviteAcknowledged";a={ackMessageId:this.$7,eventName:"inviteResponse",status:a};this.$10(a)}else throw b("unrecoverableViolation")("respondToInvite called in unexpected state "+this.$4,"rtc_www")};c.sendClientEvent=function(a){throw b("unrecoverableViolation")("sendClientEvent called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendInvite=function(a,c){throw b("unrecoverableViolation")("sendInvite called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendSdp=function(a,c){throw b("unrecoverableViolation")("sendSdp called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendIceCandidate=function(a){throw b("unrecoverableViolation")("sendIceCandidate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendMediaUpdate=function(a){throw b("unrecoverableViolation")("sendMediaUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendAddParticipantsMessage=function(a){throw b("unrecoverableViolation")("sendAddParticipantsMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendRemoveParticipantsRequest=function(a){throw b("unrecoverableViolation")("sendRemoveParticipantsRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendUsersApprovalRequest=function(a,c){throw b("unrecoverableViolation")("sendUsersApprovalRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendStateSyncUnsubscribe=function(a){throw b("unrecoverableViolation")("sendStateSyncUnsubscribe called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendStateSyncUpdate=function(a,c){throw b("unrecoverableViolation")("sendStateSyncUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendSubscriptionRequest=function(a){throw b("unrecoverableViolation")("sendSubscriptionRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendClientInfo=function(a){throw b("unrecoverableViolation")("sendClientInfo called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendGenericDataMessage=function(a,c,d){throw b("unrecoverableViolation")("sendGenericDataMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.$10=function(a){b("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",this.$4,"sending "+a.eventName,this.$1.getSignalingID()),this.$3.sendEvent(a)};c.$11=function(a,b,c){this.$4==="init"&&(this.$4="inviteReceived",this.$7=b,this.$5(a,c,this))};c.$13=function(a,b,c){if(this.$4!=="terminated"){this.$4="terminated";c={ackMessageId:b,eventName:"dismissResponse"};this.$3.sendEvent(c);this.$6&&this.$6.onDismissReceived&&this.$6.onDismissReceived(this.$1.getSignalingID(),a.reason)}};c.$12=function(a,c){c={ackMessageId:c,acknowledgedVersion:a.sdp.version,eventName:"remoteSdpResponse",negotiateType:a.negotiateType,status:b("ZenonSignalingTypes").ZenonRemoteSdpResponseStatus.OK,type:a.sdp.type};this.$3.sendEvent(c)};return a}();e.exports=a}),null);
__d("ZenonParentCallsManager",["regeneratorRuntime","BaseEventEmitter","JSResource","LazyLoadInstance","ZenonCallLogger","ZenonCallsModelTypes","ZenonCollisionContext","ZenonDismissReason","ZenonParentCallSummaryLogProcessor","ZenonParentQPLLogProcessor","ZenonParentSignalingClient","ZenonSignalingTypes","gkx","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$ZenonParentCallsManager4=new Map();d.$ZenonParentCallsManager5=new Set();d.onInviteReceived=function(a,c,e){var f,g=e.getSignalingModel().getSignalingID();e.setSignalingEventHandlers({onDismissReceived:d.onDismissReceived});var h=a.inviterID,i=a.otherParticipants,j=a.requestingVideo;a=a.roomInfo;var k="zenon_incoming_call_dialog",l=d.$ZenonParentCallsManager6({callID:g,callTrigger:k,isCaller:!1,isVideo:j,peerID:h,protocol:c});l.log({name:"inviteReceived"});k=d.$ZenonParentCallsManager3.isSupportedClientForProtocol(c);var m=k?"OK":"NOT_SUPPORTED";e.respondToInvite(m);l.log({name:"inviteResponded"});m={thread:{id:"0",type:2},type:"thread"};if(((f=a.context)==null?void 0:f.groupThreadID)||((f=a.context)==null?void 0:f.peerID)){m={thread:(f=b("ZenonCollisionContext").getThreadIDAndTypeFromCollisionContext(a.context))!=null?f:m.thread,type:"thread"}}else((f=a.room)==null?void 0:f.linkHash)!=null&&((f=a.room)==null?void 0:f.roomName)!=null&&(m={room:a.room,type:"room"});a={context:m,controllerParams:{callContext:a.name,callID:g,configuration:c,serverInfoData:(m=(f=a.context)==null?void 0:f.serverInfoData)!=null?m:null},inviterID:h,isClientPermissableRing:k,onAccept:function(a,f){var i=f.isPopupBlocked;f=f.trigger;l.log({name:"callAccepted",trigger:f});c===b("ZenonSignalingTypes").ZenonSignalingProtocol.P2P&&d.$ZenonParentCallsManager2.get(function(a){a.storeOfferForBackwardsCompat(h,g)});e.sendAnswerIntent();d.$ZenonParentCallsManager7(a,{callID:g,callTrigger:f,isPopupBlocked:i,isVideo:j,peerID:h,protocol:c})},onDecline:function(a,b){b===void 0&&(b=null),d.onDecline(g,l,a,b)},otherParticipants:i,requestingVideo:j,ringID:g};d.emit("incomingRing",a)};d.onDismissReceived=function(a,c){var e=b("ZenonDismissReason").dismissReasonToCancelReason(c);e={reason:e,ringID:a};d.emit("ringCancel",e);e=d.$ZenonParentCallsManager4.get(a);e!=null&&(e.log({name:"dismissRecv"}),e.log({endCallReason:c,isRemoteEnded:!0,name:"callEnded"}))};d.$ZenonParentCallsManager3=c;d.$ZenonParentCallsManager2=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingParentTransport").__setRef("ZenonParentCallsManager"),function(a){return new a()});d.$ZenonParentCallsManager1=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingClientManager").__setRef("ZenonParentCallsManager"),function(a){return new a(b("ZenonParentSignalingClient"),d.onInviteReceived)});return d}var d=c.prototype;d.startOutgoingCallIntent=function(a,b){var c=b.callID,d=b.callTrigger,e=b.isVideo,f=b.peerID,g=b.protocol;this.$ZenonParentCallsManager6({callID:c,callTrigger:d,isCaller:!0,isVideo:e,peerID:f,protocol:g});this.$ZenonParentCallsManager7(a,b)};d.$ZenonParentCallsManager6=function(a){var c=a.callID,d=a.callTrigger,e=a.isCaller,f=a.isVideo,g=a.peerID;a=a.protocol;var h=this.$ZenonParentCallsManager4.get(c);!h?(h=new(b("ZenonCallLogger"))({callID:c,callTrigger:d,isCaller:e,isVideo:f,peerID:g,protocol:a},b("gkx")("1536863")?[b("ZenonParentCallSummaryLogProcessor"),b("ZenonParentQPLLogProcessor")]:[b("ZenonParentCallSummaryLogProcessor")]),this.$ZenonParentCallsManager4.set(c,h)):b("recoverableViolation")("Call logger key collision in parentCallsManager for callID: "+c,"rtc_www");return h};d.$ZenonParentCallsManager7=function(a,c){var d,e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:d=c.alohaEscalatedMW,e=c.callID,f=c.isPopupBlocked;this.$ZenonParentCallsManager2.get(function(b){b.verificationNonce=a});this.$ZenonParentCallsManager5.add(e);g=this.$ZenonParentCallsManager4.get(e);if(!(g!=null)){i.next=11;break}g.log({isPopupBlocked:f,name:"popupOpened"});if(!(d!=null)){i.next=11;break}i.next=9;return b("regeneratorRuntime").awrap(d);case 9:h=i.sent,h&&g.log({endCallReason:b("ZenonDismissReason").ZenonDismissReason.OtherInstanceHandled,endCallSubreason:"forceP2POverMWForAloha",isRemoteEnded:!1,name:"callEnded"});case 11:case"end":return i.stop()}},null,this)};d.initListeners=function(a){var b=this;for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.subscribe(function(a){return b.onMessageReceived(a)},function(a){return b.onRawP2PMessageReceived(a)},function(a){return b.onRawMWMessageReceived(a)})}};d.onMessageReceived=function(a){var b=a.getHeader().signalingID;if(b!=null&&this.$ZenonParentCallsManager5.has(b))return;this.$ZenonParentCallsManager1.get(function(b){b.receiveMessage(a)})};d.onRawP2PMessageReceived=function(a){this.$ZenonParentCallsManager2.get(function(b){b.enqueueRawP2PMessage(a)})};d.onRawMWMessageReceived=function(a){this.$ZenonParentCallsManager2.get(function(b){b.enqueueRawMWMessage(a)})};d.onDecline=function(a,c,d,e){e===void 0&&(e=null),this.$ZenonParentCallsManager1.get(function(f){f=f.getSignalingClient(a);if(f){var g=b("ZenonDismissReason").endCallToDismissReason(d);d!==b("ZenonCallsModelTypes").ZenonEndCallReason.NoAnswerTimeout&&d!==b("ZenonCallsModelTypes").ZenonEndCallReason.VersionUnsupported&&e!==b("ZenonCallsModelTypes").ZenonEndCallSubreason.CallsBlocked&&f.sendDismiss(g);c.log({endCallReason:g,endCallSubreason:e==null?null:e,isRemoteEnded:!1,name:"callEnded"})}else b("recoverableViolation")("signaling client should be defined","rtc_www")})};d.removeListeners=function(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.unsubscribe()}};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("ZenonP2PMessageValidator",["CurrentUser","ZenonP2PMessageTypes","err"],(function(a,b,c,d,e,f){"use strict";f.getValidP2PMessage=a;f.transformP2PMessage=c;function a(a){a=JSON.parse(a);var c=a.call_id,d=a.from,e=a.id,f=a.msg_type,g=a.payload,h=a.source,i=a.to;a=a.type;if(i!=null&&i.toString()!==b("CurrentUser").getID())throw b("err")("P2P message.to field "+i+" does not match logged in user ID "+b("CurrentUser").getID()+" for msg_type "+f);if(d&&c&&g){i={call_id:c,from:d,id:e,msg_type:f,payload:g,source:h,type:a};return i}else throw b("err")("P2P message does not have valid from, call_id, and payload fields")}function c(a){if(a){var c=a.msg_type;switch(c){case b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.OFFER:return h(a);case b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.HANG_UP:return i(a);case b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.ICE_CANDIDATE:return g(a);case b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.OTHER_DISMISS:return j(a)}}return null}function g(a){var c=a.from,d=a.payload;a=a.source;d=JSON.parse(d);var e=d.call_id,f=d.capability,g=d.label,h=d.msg_id,i=d.sdp,j=d.sdp_line_idx,k=d.sdp_mid;d=d.version;e={call_id:e,capability:f,from:c,label:g,msg_id:h,sdp:i,sdp_line_idx:j,sdp_mid:k,source:a,type:b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.ICE_CANDIDATE,version:d};return e}function h(a){var c,d,e,f,g=a.from,h=a.payload;a=a.source;h=JSON.parse(h);var i=h.call_id,j=h.calltype,k=h.capability;c=(c=h.escalation_conference_name)!=null?c:null;d=(d=h.experiments)!=null?d:[];e=(e=h.extraParams)!=null?e:[];f=(f=h.fbexp)!=null?f:"";var l=h.handlescollision!==void 0?h.handlescollision:!1,m=h.offer_escalation_support!==void 0?h.offer_escalation_support:!1,n=h.msg_id,o=h.sdp;h=h.videoon;i={call_id:i,calltype:j,capability:k,escalation_conference_name:c,experiments:d,extraParams:e,fbexp:f,from:g,handlescollision:l,msg_id:n,offer_escalation_support:m,sdp:o,source:a,type:b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.OFFER,videoon:h};return i}function i(a){var c=a.from,d=a.payload;a=a.source;d=JSON.parse(d);var e=d.call_id,f=d.capability,g=d.msg_id,h=d.reason;d=d.subreason;e={call_id:e,capability:f,from:c,msg_id:g,reason:h,source:a,subreason:d,type:b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.HANG_UP};return e}function j(a){var c=a.from,d=a.payload;a=a.source;d=JSON.parse(d);var e=d.call_id,f=d.capability;d=d.msg_id;e={call_id:e,capability:f,from:c,msg_id:d,source:a,type:b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType.OTHER_DISMISS};return e}}),null);
__d("RTWebSignalingListener",["FBMqttChannel","ZenonDebugLogger","ZenonMWMessageTranslator","ZenonMWMessageTypes","ZenonP2PMessageTranslator","ZenonP2PMessageValidator","gkx","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(){}var c=a.prototype;c.subscribe=function(a,c,d){var e=this;b("FBMqttChannel").subscribe("/webrtc",function(d){var f=b("ZenonDebugLogger").getInstance(),g=b("ZenonP2PMessageValidator").getValidP2PMessage(d),h=b("ZenonP2PMessageValidator").transformP2PMessage(g);e.$1(d,c);if(h){d=b("ZenonP2PMessageTranslator").toSignalingMessage(h);d&&(f.logP2PMessageReceived(g),a(d),f.logP2PMessageProcessed(g))}});b("FBMqttChannel").subscribe("/rtc_multi",function(c){var f=JSON.parse(c),g=b("ZenonDebugLogger").getInstance();g.logMWMessage("RECEIVED [MQTT]",f);var h=b("ZenonMWMessageTranslator").toSignalingMessage(f);if(h){var i=f.jsonPayload.header.type===b("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN,j=b("gkx")("1767633");if(i&&j)return;g.logReceivingMultiwayMessage(f);a(h);d&&e.$2(c,d);g.logProcessingMultiwayMessage(f)}});var f=null,h=0;b("FBMqttChannel").subscribeChannelEvents({onMQTTStateChanged:function(a){if(a==="Disconnected"&&f==null)f=(g||(g=b("performanceNow")))();else if(a==="Connecting")h++;else if(a==="Connected"&&f!=null){var c=(g||(g=b("performanceNow")))()-f;b("ZenonDebugLogger").getInstance().logMQTTConnectStats(c,h);f=null;h=0}b("ZenonDebugLogger").getInstance().logMQTTStateChange(a)}})};c.unsubscribe=function(){b("FBMqttChannel").unsubscribeAll("/webrtc"),b("FBMqttChannel").unsubscribeAll("/rtc_multi")};c.$1=function(a,c){try{a=JSON.parse(a);c(a)}catch(a){b("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};c.$2=function(a,c){try{a=JSON.parse(a);c(a)}catch(a){b("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};return a}();e.exports=a}),null);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1871697");c=b("FalcoLoggerInternal").create("web_perf_device_info_log",a);e.exports=c}),null);
__d("XDeviceClassRealtimeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/web_perf/get_perf_level/",{})}),null);
__d("WebDevicePerfInfoLogging",["regeneratorRuntime","Promise","AsyncTypedRequest","JSScheduler","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeController"],(function(a,b,c,d,e,f){"use strict";f.doLog=a;f.doLogPromise=c;function g(a){var b=document.createElement("canvas");b=b.getContext("webgl")||b.getContext("experimental-webgl");if(!b)return;var c=b.getExtension("WEBGL_debug_renderer_info");if(!c)return;var d=b.getParameter(c.UNMASKED_RENDERER_WEBGL);b=b.getParameter(c.UNMASKED_VENDOR_WEBGL);a.gpu_vendor=b;a.gpu_renderer=d}function h(){var a={};navigator&&navigator.hardwareConcurrency!==void 0&&(a.cpu_cores=navigator.hardwareConcurrency);navigator&&navigator.deviceMemory!==void 0&&(a.ram=navigator.deviceMemory);b("WebDevicePerfInfoData").needsFullUpdate&&g(a);return a}function i(){var a=h();b("WebPerfDeviceInfoLogFalcoEvent").log(function(){var b;return{cpu_cores:(b=a.cpu_cores)!=null?b:null,ram:(b=a.ram)!=null?b:null,gpu_renderer:(b=a.gpu_renderer)!=null?b:null,gpu_vendor:(b=a.gpu_vendor)!=null?b:null}})}function j(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=h();d.next=3;return b("regeneratorRuntime").awrap(new(b("AsyncTypedRequest"))(b("XDeviceClassRealtimeController").getURIBuilder().getURI()).setData(a).promisePayload());case 3:c=d.sent;return d.abrupt("return",c.devicePerfClassLevel);case 5:case"end":return d.stop()}},null,this)}function a(){(b("WebDevicePerfInfoData").needsFullUpdate||b("WebDevicePerfInfoData").needsPartialUpdate)&&b("JSScheduler").scheduleSpeculativeCallback(i)}function c(){return new(b("Promise"))(function(a,c){b("WebDevicePerfInfoData").needsFullUpdate||b("WebDevicePerfInfoData").needsPartialUpdate?b("JSScheduler").scheduleSpeculativeCallback(function(){j().then(a)["catch"](c)}):c()})}}),null);
__d("AcfToastImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1873550");c=b("FalcoLoggerInternal").create("acf_toast_impression",a);e.exports=c}),null);
__d("ClientConsistencyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1764786");c=b("FalcoLoggerInternal").create("client_consistency",a);e.exports=c}),null);
__d("FleetBeaconStates",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getName=function(){return"initial"};b.getFleetBeaconRunner=function(){return this.$1};b.prepareFleetBeaconSucceed=function(){throw new Error("Invalid transition")};b.prepareFleetBeaconFailed=function(){throw new Error("Invalid transition")};b.subscribeIssued=function(){throw new Error("Invalid transition")};b.subscribeSuccessSignalReceived=function(){throw new Error("Invalid transition")};b.publishIssued=function(){throw new Error("Invalid transition")};b.publishFailed=function(){throw new Error("Invalid transition")};b.payloadReceived=function(){throw new Error("Invalid transition")};b.waitForPublishTimeout=function(){throw new Error("Invalid transition")};b.subscribeTimeout=function(){throw new Error("Invalid transition")};b.payloadTimeout=function(){throw new Error("Invalid transition")};b.cleanUpFinish=function(){throw new Error("Invalid transition")};return a}();f.FleetBeaconState=a;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getName=function(){return"preparing"};c.prepareFleetBeaconSucceed=function(){var b=this;return{newState:new g(a.prototype.getFleetBeaconRunner.call(this)),action:function(){a.prototype.getFleetBeaconRunner.call(b).runFleetBeaconTest()}}};c.prepareFleetBeaconFailed=function(){var b=this;return{newState:new m(a.prototype.getFleetBeaconRunner.call(this)),action:function(){b.getFleetBeaconRunner().cleanUpFleetBeacon()}}};return b}(a);f.FleetBeaconPreparingState=b;var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"before_subscribe"};c.subscribeIssued=function(){var a=this;return{newState:new h(b.prototype.getFleetBeaconRunner.call(this)),action:function(){b.prototype.getFleetBeaconRunner.call(a).startSubscribeTimer()}}};return a}(a);f.FleetBeaconBeforeSubscribeState=g;var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"subscribe_issued"};c.subscribeSuccessSignalReceived=function(){var a=this;return{newState:new i(b.prototype.getFleetBeaconRunner.call(this)),action:function(){b.prototype.getFleetBeaconRunner.call(a).waitForNextPublish()}}};c.subscribeTimeout=function(){var a=this;return{newState:new k(b.prototype.getFleetBeaconRunner.call(this)),action:function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}}};return a}(a);f.FleetBeaconSubscribedIssuedState=h;var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"waiting_to_publish"};c.waitForPublishTimeout=function(){var a=this;return{newState:new j(b.prototype.getFleetBeaconRunner.call(this)),action:function(){b.prototype.getFleetBeaconRunner.call(a).publish(),b.prototype.getFleetBeaconRunner.call(a).startPayloadTimer()}}};return a}(a);f.FleetBeaconWaitingToPublishState=i;var j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"publish_issued"};c.publishFailed=function(){var a=this;return{newState:new m(b.prototype.getFleetBeaconRunner.call(this)),action:function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}}};c.payloadReceived=function(){var a=this,c,d;(function(){});b.prototype.getFleetBeaconRunner.call(this).isLastPayload()?(c=new l(b.prototype.getFleetBeaconRunner.call(this)),d=function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}):(c=new i(b.prototype.getFleetBeaconRunner.call(this)),d=function(){b.prototype.getFleetBeaconRunner.call(a).waitForNextPublish()});return{newState:c,action:d}};c.payloadTimeout=function(){var a=this;return{newState:new k(b.prototype.getFleetBeaconRunner.call(this)),action:function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}}};return a}(a);f.FleetBeaconPublishIssuedState=j;var k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"failed"};c.cleanUpFinish=function(){return{newState:new n(b.prototype.getFleetBeaconRunner.call(this)),action:function(){}}};return a}(a);f.FleetBeaconFailedState=k;var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"succeed"};c.cleanUpFinish=function(){return{newState:new n(b.prototype.getFleetBeaconRunner.call(this)),action:function(){}}};return a}(a);f.FleetBeaconSucceedState=l;var m=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"aborted"};c.cleanUpFinish=function(){return{newState:new n(b.prototype.getFleetBeaconRunner.call(this)),action:function(){}}};return a}(a);f.FleetBeaconAbortedState=m;var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"finish"};return a}(a);f.FleetBeaconFinishState=n}),null);
__d("FleetBeaconRunner",["FleetBeaconStates","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$2=new(b("FleetBeaconStates").FleetBeaconState)(this);var c=new(b("FleetBeaconStates").FleetBeaconPreparingState)(this);this.$1.cleanPreviousFleetBeaconResult();this.$6(function(){return{newState:c,action:function(){}}});this.$3=0;this.$1.setFleetBeaconRunner(this)}var c=a.prototype;c.getPublishTimes=function(){return this.$3};c.prepareFleetBeaconTest=function(){this.$1.prepareFleetBeaconTest()};c.runFleetBeaconTest=function(){var a=this;this.$6(function(){return a.$2.subscribeIssued()});this.$7()};c.$7=function(){this.$1.subscribe()};c.publish=function(){this.$1.publish()};c.isLastPayload=function(){return this.$3>=this.$1.publishWaitIntervalsMS().length};c.waitForNextPublish=function(){var a=this,c=this.$1.publishWaitIntervalsMS()[this.$3];this.$3+=1;c===0?this.$8():b("setTimeout")(function(){a.$8()},c)};c.startSubscribeTimer=function(){var a=this,c=this.$1.subscribeTimeoutIntervalMS();this.$4=b("setTimeout")(function(){a.$9()},c)};c.startPayloadTimer=function(){var a=this,c=this.$1.payloadTimeoutIntervalMS();this.$5=b("setTimeout")(function(){a.$10()},c)};c.cleanUpFleetBeacon=function(){this.$1.cleanUpFleetBeacon()};c.onCleanUpFinish=function(){var a=this;this.$6(function(){return a.$2.cleanUpFinish()})};c.$8=function(){var a=this;this.$6(function(){return a.$2.waitForPublishTimeout()})};c.$9=function(){var a=this;this.$6(function(){return a.$2.subscribeTimeout()})};c.$10=function(){var a=this;this.$6(function(){return a.$2.payloadTimeout()})};c.onPrepareFleetBeaconSuccess=function(){var a=this;this.$6(function(){return a.$2.prepareFleetBeaconSucceed()})};c.onPrepareFleetBeaconFailed=function(){var a=this;this.$6(function(){return a.$2.prepareFleetBeaconFailed()})};c.onSubscribe=function(){var a=this;b("clearTimeout")(this.$4);this.$6(function(){return a.$2.subscribeSuccessSignalReceived()})};c.onPayloadReceived=function(){var a=this;b("clearTimeout")(this.$5);this.$6(function(){return a.$2.payloadReceived()})};c.onPublishFailed=function(){var a=this;b("clearTimeout")(this.$5);this.$6(function(){return a.$2.publishFailed()})};c.$6=function(a){a=a();var b=this.$2;this.$2=a.newState;var c=this.$2;this.$11(b,c);a.action()};c.$11=function(a,b){this.$1.onFleetBeaconStateTransition(a,b)};return a}();e.exports=a}),null);
__d("FleetBeaconStateTransitionListener",[],(function(a,b,c,d,e,f){a=function(){function a(){}var b=a.prototype;b.onFleetBeaconStateTransition=function(a,b,c,d){throw new Error("Require implementation")};b.cleanState=function(){throw new Error("Require implementation")};return a}();e.exports=a}),null);
__d("FleetBeaconTestBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=null,this.$2=[]}var b=a.prototype;b.addStateTransitionListener=function(a){this.$2.push(a)};b.cleanPreviousFleetBeaconResult=function(){this.$2.forEach(function(a){a.cleanState()})};b.getNumberOfPublishers=function(){var a;return(a=(a=this.$1)==null?void 0:a.getPublishTimes())!=null?a:-1};b.getTestID=function(){throw new Error("Require implementation")};b.setFleetBeaconRunner=function(a){this.$1=a};b.prepareFleetBeaconTest=function(){throw new Error("Require implementation")};b.onPrepareFleetBeaconSuccess=function(){var a;(a=this.$1)==null?void 0:a.onPrepareFleetBeaconSuccess()};b.onPrepareFleetBeaconFailed=function(){var a;(a=this.$1)==null?void 0:a.onPrepareFleetBeaconFailed()};b.subscribe=function(){throw new Error("Require implementation")};b.onSubscribe=function(){var a;(a=this.$1)==null?void 0:a.onSubscribe()};b.publish=function(){throw new Error("Require implementation")};b.cleanUpFleetBeacon=function(){throw new Error("Require implementation")};b.onCleanUpFinish=function(){var a;(a=this.$1)==null?void 0:a.onCleanUpFinish()};b.onPublishFailed=function(){var a;(a=this.$1)==null?void 0:a.onPublishFailed()};b.onPayloadReceived=function(){var a;(a=this.$1)==null?void 0:a.onPayloadReceived()};b.subscribeTimeoutIntervalMS=function(){return 1e4};b.payloadTimeoutIntervalMS=function(){return 2e4};b.publishWaitIntervalsMS=function(){return[1e4,5e3]};b.shouldStartTime=function(){return!0};b.onFleetBeaconStateTransition=function(a,b){var c=this,d=Date.now();this.$2.forEach(function(e){e.onFleetBeaconStateTransition(a,b,d,c)})};return a}();e.exports=a}),null);
__d("FleetBeaconTestUIAnnouncer",["FleetBeaconStateTransitionListener"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$FleetBeaconTestUIAnnouncer1=[];b.$FleetBeaconTestUIAnnouncer3=!1;b.$FleetBeaconTestUIAnnouncer4=!1;b.$FleetBeaconTestUIAnnouncer5=!1;b.$FleetBeaconTestUIAnnouncer6=!1;b.$FleetBeaconTestUIAnnouncer7=-1;b.$FleetBeaconTestUIAnnouncer8=-1;b.$FleetBeaconTestUIAnnouncer9=0;b.$FleetBeaconTestUIAnnouncer10=0;b.$FleetBeaconTestUIAnnouncer11=[];b.$FleetBeaconTestUIAnnouncer12=-1;b.$FleetBeaconTestUIAnnouncer13=-1;b.$FleetBeaconTestUIAnnouncer14=-1;return b}var c=b.prototype;c.cleanState=function(){this.$FleetBeaconTestUIAnnouncer3=!1,this.$FleetBeaconTestUIAnnouncer4=!1,this.$FleetBeaconTestUIAnnouncer5=!1,this.$FleetBeaconTestUIAnnouncer6=!1,this.$FleetBeaconTestUIAnnouncer7=-1,this.$FleetBeaconTestUIAnnouncer8=-1,this.$FleetBeaconTestUIAnnouncer9=0,this.$FleetBeaconTestUIAnnouncer10=0,this.$FleetBeaconTestUIAnnouncer11=[],this.$FleetBeaconTestUIAnnouncer12=-1,this.$FleetBeaconTestUIAnnouncer13=-1,this.$FleetBeaconTestUIAnnouncer14=-1};c.addSubscriber=function(a){this.$FleetBeaconTestUIAnnouncer1.push(a)};c.onFleetBeaconStateTransition=function(a,b,c,d){var e=d.getTestID(),f={oldState:a,newState:b,testID:e,timestamp:c,extra:{}};this.$FleetBeaconTestUIAnnouncer2==null&&(this.$FleetBeaconTestUIAnnouncer2=d);e="NONE";switch(b.getName()){case"initial":break;case"preparing":this.$FleetBeaconTestUIAnnouncer12=Date.now();this.$FleetBeaconTestUIAnnouncer3=!0;f.extra=babelHelpers["extends"]({},f.extra,{createIssued:!0});break;case"before_subscribe":this.$FleetBeaconTestUIAnnouncer13=Date.now();this.$FleetBeaconTestUIAnnouncer4=!0;f.extra=babelHelpers["extends"]({},f.extra,{createSuccess:!0});break;case"subscribe_issued":this.$FleetBeaconTestUIAnnouncer5=!0;f.extra=babelHelpers["extends"]({},f.extra,{subscribeIssued:!0,subscribeTimestamp:this.$FleetBeaconTestUIAnnouncer13,subscribeTimeoutIntervalMS:(d=(c=this.$FleetBeaconTestUIAnnouncer2)==null?void 0:c.subscribeTimeoutIntervalMS())!=null?d:-1});break;case"waiting_to_publish":a.getName()==="subscribe_issued"&&(this.$FleetBeaconTestUIAnnouncer6=!0,this.$FleetBeaconTestUIAnnouncer7=Date.now()-this.$FleetBeaconTestUIAnnouncer13,f.extra=babelHelpers["extends"]({},f.extra,{subscribeSuccess:!0,subscribeLatencyMS:this.$FleetBeaconTestUIAnnouncer7}));a.getName()==="publish_issued"&&this.$FleetBeaconTestUIAnnouncer15(f);break;case"publish_issued":this.$FleetBeaconTestUIAnnouncer9+=1;this.$FleetBeaconTestUIAnnouncer14=Date.now();f.extra=babelHelpers["extends"]({},f.extra,{publishIssued:!0,payloadTimeoutInterval:(c=(b=this.$FleetBeaconTestUIAnnouncer2)==null?void 0:b.payloadTimeoutIntervalMS())!=null?c:-1});break;case"failed":a.getName()==="subscribe_issued"&&(e="SUBSCRIBE_FAILED");a.getName()==="publish_issued"&&(e="RECEIVE_PUBLISH_FAILED");this.$FleetBeaconTestUIAnnouncer16(f,"FAILURE",e);break;case"succeed":a.getName()==="publish_issued"&&this.$FleetBeaconTestUIAnnouncer15(f);this.$FleetBeaconTestUIAnnouncer16(f,"SUCCESS","NONE");break;case"aborted":a.getName()==="preparing"&&(e="CREATE_TEST_FAILED");a.getName()==="publish_issued"&&(e="MUTATE_FIELD_FAILED");this.$FleetBeaconTestUIAnnouncer16(f,"ABORT",e);break;case"finish":f.extra=babelHelpers["extends"]({},f.extra,{cleanUpFinish:!0});break;default:}this.$FleetBeaconTestUIAnnouncer1.forEach(function(a){a(f)})};c.$FleetBeaconTestUIAnnouncer15=function(a){this.$FleetBeaconTestUIAnnouncer10+=1;var b=Date.now()-this.$FleetBeaconTestUIAnnouncer14;this.$FleetBeaconTestUIAnnouncer11.push(b);a.extra=babelHelpers["extends"]({},a.extra,{payloadSuccess:!0,payloadSuccessCnt:this.$FleetBeaconTestUIAnnouncer10,payloadLatency:b})};c.$FleetBeaconTestUIAnnouncer16=function(a,b,c){a.extra=babelHelpers["extends"]({},a.extra,{testResult:b,failureReason:c})};return b}(b("FleetBeaconStateTransitionListener"));e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork",["regeneratorRuntime","Promise","CurrentUser","RelayModern","uuid","FleetBeaconSubscriptionNetwork_Subscription.graphql","FleetBeaconSubscriptionNetwork_PublishMutation.graphql","FleetBeaconSubscriptionNetwork_LogMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i;a=function(){function a(a){this.environment=a}var c=a.prototype;c.subscribe=function(a,c){return b("RelayModern").requestSubscription(this.environment,{subscription:g!==void 0?g:g=b("FleetBeaconSubscriptionNetwork_Subscription.graphql"),variables:{input:{test_id:a}},onError:c.onError,onNext:c.onNext})};c.publish=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:return d.abrupt("return",new(b("Promise"))(function(d,e){b("RelayModern").commitMutation(c.environment,{mutation:h!==void 0?h:h=b("FleetBeaconSubscriptionNetwork_PublishMutation.graphql"),variables:{input:{client_mutation_id:b("uuid")(),actor_id:b("CurrentUser").getAccountID(),test_id:a}},onCompleted:function(a){return d()},onError:e})}));case 1:case"end":return d.stop()}},null,this)};c.log=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:return d.abrupt("return",new(b("Promise"))(function(d,e){b("RelayModern").commitMutation(c.environment,{mutation:i!==void 0?i:i=b("FleetBeaconSubscriptionNetwork_LogMutation.graphql"),variables:{input:a},onCompleted:function(a){return d()},onError:e})}));case 1:case"end":return d.stop()}},null,this)};return a}();e.exports=a}),null);
__d("FleetBeaconTestSubscriptionLogger",["CurrentUser","FleetBeaconStateTransitionListener","RelayRTIUtils","uuid"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d){var e;e=a.call(this)||this;e.$FleetBeaconTestSubscriptionLogger1=null;e.$FleetBeaconTestSubscriptionLogger2=b;e.$FleetBeaconTestSubscriptionLogger3=!1;e.$FleetBeaconTestSubscriptionLogger4=!1;e.$FleetBeaconTestSubscriptionLogger5=!1;e.$FleetBeaconTestSubscriptionLogger6=!1;e.$FleetBeaconTestSubscriptionLogger7=-1;e.$FleetBeaconTestSubscriptionLogger8=-1;e.$FleetBeaconTestSubscriptionLogger9=0;e.$FleetBeaconTestSubscriptionLogger10=0;e.$FleetBeaconTestSubscriptionLogger11=[];e.$FleetBeaconTestSubscriptionLogger12=-1;e.$FleetBeaconTestSubscriptionLogger13=-1;e.$FleetBeaconTestSubscriptionLogger14=-1;e.$FleetBeaconTestSubscriptionLogger15=c;e.$FleetBeaconTestSubscriptionLogger16=d;return e}var d=c.prototype;d.cleanState=function(){this.$FleetBeaconTestSubscriptionLogger3=!1,this.$FleetBeaconTestSubscriptionLogger4=!1,this.$FleetBeaconTestSubscriptionLogger5=!1,this.$FleetBeaconTestSubscriptionLogger6=!1,this.$FleetBeaconTestSubscriptionLogger7=-1,this.$FleetBeaconTestSubscriptionLogger8=-1,this.$FleetBeaconTestSubscriptionLogger9=0,this.$FleetBeaconTestSubscriptionLogger10=0,this.$FleetBeaconTestSubscriptionLogger11=[],this.$FleetBeaconTestSubscriptionLogger12=-1,this.$FleetBeaconTestSubscriptionLogger13=-1,this.$FleetBeaconTestSubscriptionLogger14=-1};d.onFleetBeaconStateTransition=function(a,b,c,d){this.$FleetBeaconTestSubscriptionLogger1==null&&(this.$FleetBeaconTestSubscriptionLogger1=d);c="NONE";switch(b.getName()){case"initial":break;case"preparing":this.$FleetBeaconTestSubscriptionLogger12=Date.now();this.$FleetBeaconTestSubscriptionLogger3=!0;break;case"before_subscribe":this.$FleetBeaconTestSubscriptionLogger13=Date.now();this.$FleetBeaconTestSubscriptionLogger4=!0;break;case"subscribe_issued":this.$FleetBeaconTestSubscriptionLogger5=!0;break;case"waiting_to_publish":a.getName()==="subscribe_issued"&&(this.$FleetBeaconTestSubscriptionLogger6=!0,this.$FleetBeaconTestSubscriptionLogger7=Date.now()-this.$FleetBeaconTestSubscriptionLogger13);a.getName()==="publish_issued"&&this.$FleetBeaconTestSubscriptionLogger17();break;case"publish_issued":this.$FleetBeaconTestSubscriptionLogger9+=1;this.$FleetBeaconTestSubscriptionLogger14=Date.now();break;case"failed":a.getName()==="subscribe_issued"&&(c="SUBSCRIBE_FAILED");a.getName()==="publish_issued"&&(c="RECEIVE_PUBLISH_FAILED");this.$FleetBeaconTestSubscriptionLogger18("FAILURE",c);break;case"succeed":a.getName()==="publish_issued"&&this.$FleetBeaconTestSubscriptionLogger17();this.$FleetBeaconTestSubscriptionLogger18("SUCCESS","NONE");break;case"aborted":a.getName()==="preparing"&&(c="CREATE_TEST_FAILED");a.getName()==="publish_issued"&&(c="MUTATE_FIELD_FAILED");this.$FleetBeaconTestSubscriptionLogger18("ABORT",c);break;default:}};d.$FleetBeaconTestSubscriptionLogger17=function(){this.$FleetBeaconTestSubscriptionLogger10+=1;var a=Date.now()-this.$FleetBeaconTestSubscriptionLogger14;this.$FleetBeaconTestSubscriptionLogger11.push(a)};d.$FleetBeaconTestSubscriptionLogger18=function(a,c){var d,e=this,f=this.$FleetBeaconTestSubscriptionLogger12=Date.now()-this.$FleetBeaconTestSubscriptionLogger12,g=parseInt(this.$FleetBeaconTestSubscriptionLogger11.reduce(function(a,b){return a+b},0)/this.$FleetBeaconTestSubscriptionLogger10,10);d=(d=this.$FleetBeaconTestSubscriptionLogger1)==null?void 0:d.getTestID();if(d==null)return;this.$FleetBeaconTestSubscriptionLogger2.log({client_mutation_id:b("uuid")(),actor_id:b("CurrentUser").getAccountID(),test_id:d,test_name:"Web_Manual",test_result:a,failure_reason:c,subscribe_issued:this.$FleetBeaconTestSubscriptionLogger5,subscribe_success:this.$FleetBeaconTestSubscriptionLogger6,subscribe_latency_ms:this.$FleetBeaconTestSubscriptionLogger7,subscribe_timeout_interval_ms:(d=this.$FleetBeaconTestSubscriptionLogger1)==null?void 0:d.subscribeTimeoutIntervalMS(),publish_success:this.$FleetBeaconTestSubscriptionLogger10>0,publish_latency_ms:g,publish_timeout_interval_ms:(a=this.$FleetBeaconTestSubscriptionLogger1)==null?void 0:a.payloadTimeoutIntervalMS(),test_duration_ms:f,triggering_subscription:(c=this.$FleetBeaconTestSubscriptionLogger15)!=null?c:"manual",app_id:b("RelayRTIUtils").GRAPH_SERVICES_SDK_APP_ID}).then(function(a){e.$FleetBeaconTestSubscriptionLogger16(!0)})["catch"](function(a){e.$FleetBeaconTestSubscriptionLogger16(!1)})};return c}(b("FleetBeaconStateTransitionListener"));e.exports=a}),null);
__d("FleetBeaconTestSubscription",["FleetBeaconTestBase","FleetBeaconTestSubscriptionLogger","FleetBeaconTestUIAnnouncer","uuid"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;f=a.call(this)||this;f.onCleanUpFleetBeaconFinish=function(a){f.onCleanUpFinish()};f.$FleetBeaconTestSubscription1=c;f.$FleetBeaconTestSubscription3=null;f.$FleetBeaconTestSubscription4=e;f.$FleetBeaconTestSubscription6=new(b("FleetBeaconTestSubscriptionLogger"))(c,d,f.onCleanUpFleetBeaconFinish);f.$FleetBeaconTestSubscription5=new(b("FleetBeaconTestUIAnnouncer"))();a.prototype.addStateTransitionListener.call(babelHelpers.assertThisInitialized(f),f.$FleetBeaconTestSubscription6);a.prototype.addStateTransitionListener.call(babelHelpers.assertThisInitialized(f),f.$FleetBeaconTestSubscription5);f.cleanPreviousFleetBeaconResult();return f}var d=c.prototype;d.cleanPreviousFleetBeaconResult=function(){a.prototype.cleanPreviousFleetBeaconResult.call(this),this.$FleetBeaconTestSubscription2=b("uuid")()};d.getTestID=function(){return this.$FleetBeaconTestSubscription2};d.getFleetBeaconUIAnnouncer=function(){return this.$FleetBeaconTestSubscription5};d.prepareFleetBeaconTest=function(){this.onPrepareFleetBeaconSuccess()};d.subscribe=function(){var a=this,b=this.$FleetBeaconTestSubscription2;if(b==null)return;this.$FleetBeaconTestSubscription3=this.$FleetBeaconTestSubscription1.subscribe(b,{onNext:function(){a.onPayloadReceived()},onError:function(){}});this.onSubscribe()};d.publish=function(){var b=this,c=this.$FleetBeaconTestSubscription2;if(c==null)return;this.$FleetBeaconTestSubscription1.publish(c)["catch"](function(c){a.prototype.onPublishFailed.call(b)})};d.cleanUpFleetBeacon=function(){};d.$FleetBeaconTestSubscription7=function(){var a;(a=this.$FleetBeaconTestSubscription3)==null?void 0:a.dispose()};d.onFleetBeaconStateTransition=function(b,c){a.prototype.onFleetBeaconStateTransition.call(this,b,c);b=c.getName();b==="finish"&&(this.$FleetBeaconTestSubscription4(),this.$FleetBeaconTestSubscription7())};return c}(b("FleetBeaconTestBase"));e.exports=a}),null);
__d("FleetBeaconSubscriptionLauncher",["FleetBeaconRunner","FleetBeaconSubscriptionNetwork","FleetBeaconTestSubscription"],(function(a,b,c,d,e,f){"use strict";f.CreateFleetBeaconTestSubscription=a;f.LaunchFleetBeaconTestSubscription=c;function a(a,c,d){a=new(b("FleetBeaconTestSubscription"))(new(b("FleetBeaconSubscriptionNetwork"))(a),c,d);return a}function c(a){var c=new(b("FleetBeaconRunner"))(a);a.setFleetBeaconRunner(c);c.prepareFleetBeaconTest()}}),null);
__d("MqttLongPollingHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onPollRequestSent=function(){this.$1.forEach(function(a){a.onPollRequestSent()})};b.onPollRequestSuccess=function(){this.$1.forEach(function(a){a.onPollRequestSuccess()})};b.onPollResponse=function(a){this.$1.forEach(function(b){b.onPollResponse(a)})};b.onPollFinish=function(){this.$1.forEach(function(a){a.onPollFinish()})};b.onPollRequestFailed=function(a){this.$1.forEach(function(b){b.onPollRequestFailed(a)})};return a}();e.exports=a}),null);
__d("PromiseResult",["Promise"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.promise=new(b("Promise"))(function(b,c){a.$1=b,a.$2=c})}var c=a.prototype;c.resolve=function(a){this.$1(a)};c.reject=function(a){this.$2(a)};return a}();e.exports=a}),null);
__d("MqttFetchClient",["Promise","MqttEnv","MqttProtocolCodec","MqttUtils","PromiseResult"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttProtocolCodec").WireMessage,i=b("MqttProtocolCodec").decodeByteMessages,j=b("MqttProtocolCodec").MESSAGE_TYPE,k="fetch_pull",l="fetch_pull_finish",m="fetch_",n=6e4,o="action",p="chunked",q="send",r="true",s=5,t=20,u=10,v=5e3;a=function(){function a(){this.$1="",this.$2=g.getLoggerInstance(),this.$3=0,this.$4="",this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}a.isSupported=function(){return typeof fetch==="function"};var c=a.prototype;c.run=function(a,c,d,e,f,g,h,i){this.$1=b("MqttUtils").endpointWithSessionId(a,c),this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$20()};c.isTopicSupported=function(a){return!0};c.publish=function(a,c){if(this.$14!=="ReceivingData"){this.$2.bumpCounter(m+"publish."+a+".invalidstate");return b("Promise").reject("not connected")}else{this.$2.bumpCounter(m+"publish."+a+".publish");var d=new(b("PromiseResult"))();a={topic:a,payload:c,promiseResult:d};this.$15.push(a);this.$21();return d.promise}};c.abort=function(){this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){}};c.$22=function(a){var b=this;a.forEach(function(a){b.$2.bumpCounter(m+"publish."+a.topic+".resolved"),a.promiseResult.resolve()});this.$12+=a.length};c.$23=function(a,b){var c=this;a.forEach(function(a){c.$2.bumpCounter(m+"publish."+a.topic+".rejected"),a.promiseResult.reject(b)})};c.$24=function(a,b,c,d){var e=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+c);this.$2.bumpCounter(m+"publish_request_failed");this.$14!="ReceivingData"||c===s?(this.$23(a,d),this.$18=!1,this.$2.bumpCounter(m+"publish_request_failed_final"),this.$21()):this.$25(a,b,c+1)};c.$26=function(a,b,c,d){if(!d.ok){this.$2.bumpCounter(m+"publish_request_failed.http."+d.status);if(d.status===409){this.$19++;if(this.$19>=u){this.$2.bumpCounter(m+"409_reset");this.$27(new Error("Too many 409 errors"));return}}this.$24(a,b,c,this.$28(d));return}this.$2.bumpCounter(m+"publish_request_success");b=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+b+", retry:"+c);this.$22(a);this.$18=!1;this.$21()};c.$21=function(){if(this.$14!="ReceivingData")return;if(this.$18)return;if(this.$15.length==0&&this.$16.length==0)return;this.$18=!0;var a=this.$15.slice(0,t);this.$15=this.$15.slice(t,this.$15.length);clearTimeout(this.$17);this.$17=null;var b=this.$16.slice(0,t);this.$16=this.$16.slice(t,this.$16.length);this.$25(a,b,0)};c.$25=function(a,c,d){var e=this,f=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+f+", retry:"+d);f=b("MqttUtils").endpointWithExtraParameter(this.$1,o,q);var h=a.map(function(a){return{topic:a.topic,payload:a.payload,qos:0,messageId:g.random()}});h=this.$5.gen(this.$3,[],h,c);this.$2.bumpCounter(m+"publish_request");b("MqttUtils").promiseDoneWithTimeout(fetch(f,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:h,keepalive:!1}),function(b){return e.$26(a,c,d,b)},function(b){return e.$24(a,c,d,b)},n)};c.$29=function(a){a=a.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+a);this.$9(a);this.$30(!1,a);this.$2.bumpCounter(m+"error");this.$14="Error"};c.$31=function(a){var b=this;this.$2.debugTrace("FetchClient","Fetch response data received");a=i(new Uint8Array(a));a=a.messages;var c=a.filter(function(a){return a.messageType===j.PINGREQ});a=a.filter(function(a){return a.messageType===j.PUBLISH}).map(function(a){if(!(a instanceof h.Publish))return{};a=a;a.qos===1&&a.messageIdentifier!=null&&(b.$16.push(a.messageIdentifier),b.$17==null&&(b.$17=g.setTimeout(function(){b.$21()},v)));return{topic:a.topic,payload:a.payloadMessage.payloadString,qos:a.qos}});for(var d=a,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(e){if(f>=d.length)break;k=d[f++]}else{f=d.next();if(f.done)break;k=f.value}k=k;this.$2.bumpCounter(m+"response_"+k.topic)}a&&a.length>0&&(this.$13+=a.length,this.$7(a));c&&c.length>0&&this.$32()};c.$32=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(m+"ping")};c.$27=function(a){this.$2.debugTrace("FetchClient","Fetch request ended: "+a.toString()),this.$2.bumpCounter(m+"done"),this.$33(a.message),this.$8(),this.$14="Done"};c.$34=function(a,c,d){var e=this;if(d!==null&&d!==void 0)try{this.$31(d)}catch(a){this.$27(a);this.$2.bumpCounter(m+"dataDecodeException");return}if(c){this.$27(new Error("EOF"));return}b("MqttUtils").promiseDone(a.read(),function(c){var b=c.done;c=c.value;return e.$34(a,b,c)},function(a){return e.$27(a)})};c.$35=function(a){if(!a.ok){this.$2.bumpCounter(m+"error.http."+a.status);this.$29(this.$28(a));return}a=a.body;if(!a){this.$29(new Error("Empty body"));return}a=a.getReader();this.$6();this.$2.bumpCounter(m+"success");this.$30(!0,null);this.$11=Date.now();this.$14="ReceivingData";this.$2.debugTrace("FetchClient","Fetch request success");this.$34(a,!1,null)};c.$33=function(a){this.$2.eventLogPullFinish({pullEventName:l,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:a,publishReceived:this.$13,publishSent:this.$12})};c.$30=function(a,b){this.$2.eventLogPull({pullEventName:k,sessionID:this.$3,status:a,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:b})};c.$20=function(){var a=this;if(this.$14!="Ready")return;this.$2.debugTrace("FetchClient","Sending fetch request");this.$2.bumpCounter(m+"request");this.$10=Date.now();var c=b("MqttUtils").endpointWithExtraParameter(this.$1,p,r);b("MqttUtils").promiseDoneWithTimeout(fetch(c,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(b){return a.$35(b)},function(b){return a.$29(b)},n)};c.$28=function(a){return new Error("Http error, status="+a.status)};return a}();e.exports=a}),null);
__d("MqttLongPollingClient",["Promise","MqttEnv","MqttProtocolCodec","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttProtocolCodec").WireMessage,i=b("MqttProtocolCodec").decodeByteMessages,j=120*1e3,k="simple_pull";a=function(){function a(){this.$3="",this.$4=0,this.$2=g.getLoggerInstance(),this.$1="Ready",this.$5="",this.$7=function(){},this.$8=function(a){},this.$9=function(){},this.$10=function(a){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var c=a.prototype;c.run=function(a,b,c,d,e,f,g,h){this.$3=a,this.$4=b,this.$5=c,this.$6=d,this.$7=e,this.$8=f,this.$9=g,this.$10=h,this.$14(this.$5)};c.isTopicSupported=function(a){return this.$13.has(a)};c.publish=function(a,c){return b("Promise").reject("not supported")};c.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")};c.$15=function(a,b){if(this.$1===a)return;this.$1=a;a=="Error"&&b!=null&&this.$10(b)};c.$16=function(a){if(this.$1!="RequestSend")return;if(!a){this.$17("EmptyResponse",null);return}this.$7();this.$18(!0,null);this.$15("ResponseReceived");a=i(new Uint8Array(a));a=a.messages.filter(function(a){return a instanceof h.Publish}).map(function(a){if(a instanceof h.Publish){a=a;return{topic:a.topic,payload:a.payloadMessage.payloadString,qos:a.qos}}else return{}});this.$8(a);this.$9()};c.$17=function(a,b){b=b!=null?b.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+a+", errorMsg:"+b);this.$18(!1,a+":"+b);this.$15("Error",a)};c.$18=function(a,b){this.$2.eventLogPull({pullEventName:k,sessionID:this.$4,status:a,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:b})};c.$14=function(a){var c=this;if(this.$1!="Ready"||this.$12)return;try{this.$11=Date.now(),this.$12=new(b("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(a).setTransportBuilder(b("getCrossOriginTransport").withCredentials).setResponseHandler(function(a){return c.$16(a)}).setNetworkFailureHandler(function(a){c.$17("Network",a)}).setErrorHandler(function(a){c.$17("Error",a)}).setAbortHandler(function(a){c.$17("Abort",null)}).setTimeoutHandler(function(){c.$17("Timeout",null)}).setTimeout(j).send(),this.$15("RequestSend")}catch(a){this.$17("Error",a)}};return a}();e.exports=a}),null);
__d("exponentialBackoff",["MqttEnv"],(function(a,b,c,d,e,f){var g=b("MqttEnv").Env;function a(a,b){b===void 0&&(b=null);var c=null,d=0;function e(){for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];var i=function(){a.apply(b,f)};if(c===null){var j=Math.max(0,Math.pow(2,Math.min(d,6))*(1e3+g.random()*100)-2e3);c=g.setTimeout(function(){i(),c=null},j)}d++}e.reset=function(){d=0,c!=null&&(g.clearTimeout(c),c=null)};e.isPending=function(){return c!=null};return e}e.exports=a}),null);
__d("MqttLongPollingRunner",["Promise","MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","exponentialBackoff"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames,i=b("MqttTypes").MqttChannelError,j=4,k=1e3,l=3e3,m="mqtt_should_longpoll",n="last_lp",o="yes",p="no";a=function(){function a(a,c,d,e,f,j,k,l,m){var n=this;this.$23=function(){try{if(!n.$29())return;var a=n.$30();n.$14=a;var c=n.$9(),d=n.$10();c=c.filter(function(b){return a.isTopicSupported(b)});d=d.filter(function(b){return a.isTopicSupported(b.topic)});if(c.length==0&&d.length==0){n.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do");n.$14=null;g.setTimeout(function(){n.$23()},1e3);return}var e=b("MqttUtils").generateSessionId();a.run(n.$6,e,n.$7.gen(e,c,d),n.$7,function(){return n.$31()},function(a){return n.$32(a)},function(){return n.$33()},function(a){return n.$34(a)});n.$19.onPollRequestSent();e=c.join(",");c=d.map(function(a){return a.topic}).join(",");n.$5.debugTrace("LongPollingRunner","Making a poll request to "+n.$6+". SubscribedTopics:"+e+". Publishes:"+c)}catch(a){a&&n.$5.logErrorWarn(a,"lp_js_error"),n.$11(new i(!1,"js error lp",a)),n.$34("lp_js_error")}};this.$6=a;this.$7=c;this.$1=e;this.$2=0;this.$3=d;this.$4=b("MqttUtils").hasWSSupport();this.$5=g.getLoggerInstance();this.$8=f;this.$9=j;this.$10=k;this.$11=l;this.$12=m;this.$13=!1;this.$14=null;this.$15="LPInactive";this.$16="NotSent";this.$17=0;this.$19=new(b("MqttLongPollingHookCollection"))();this.$18=new(b("exponentialBackoff"))(this.$23,this);this.$20=0;this.$21=p;a=g.genGk(h.mqtt_lp_use_fetch);c=b("MqttFetchClient").isSupported();a?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail");c?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported");this.$22=a&&c}var c=a.prototype;c.addHook=function(a){this.$19.addHook(a)};c.start=function(){var a=this;this.$21=g.configRead(n,p);this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21);this.$20=Date.now();this.$23();g.setTimeout(function(){a.$23()},k+100);g.setTimeout(function(){a.$23()},l+100)};c.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"};c.publish=function(a,c,d){return g.genGk(h.mqtt_enable_publish_over_polling)&&(this.$14&&this.$14.isTopicSupported(a))?this.$14.publish(a,c):b("Promise").reject()};c.onConnectAttempt=function(){};c.onConnectFailure=function(){this.$2++,this.$23()};c.onConnected=function(){};c.onConnectSuccess=function(){this.$1=!0,g.configWrite(n,null)};c.onConnectionLost=function(){};c.onSubscribe=function(a){};c.onUnsubscribe=function(a){};c.onPublish=function(a){};c.onMessage=function(a){};c.onWSFatal=function(){this.$3=!0,this.$23()};c.getStatus=function(){return this.$15};c.getRequestStatus=function(){return this.$16};c.$24=function(a){a!=this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+a+" from "+this.$15),this.$15=a,this.$12(this.$15,this.$16))};c.$25=function(a){if(!this.$22)return;a!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+a+" from "+this.$16),this.$16=a,this.$12(this.$15,this.$16))};c.$26=function(){this.$17=0};c.$27=function(){this.$17++,this.$17>=j&&this.$24("LPError")};c.$28=function(){var a=g.genGk(h.mqtt_lp_no_delay),b=g.genGk(h.mqtt_ws_polling_enabled),c=g.genGk(h.mqtt_fast_lp);this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(a)+" enabled:"+String(b)+" fastPoll:"+String(c)+" hasWSSupport:"+String(this.$4)+" hasSuccess:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3));if(!b)return!1;if(a){this.$5.bumpCounter(m+".nd");return!0}if(!this.$4){this.$5.bumpCounter(m+".na");return!0}if(this.$3){this.$5.bumpCounter(m+".fatal");return!0}if(this.$1)return!1;if(c){b=Date.now()-this.$20;if(this.$21===o){if(this.$2>=1)return!0;if(b>k){this.$5.bumpCounter(m+".fastdelay");return!0}}else if(b>l){this.$5.bumpCounter(m+".regulardelay");return!0}}if(this.$2>=3){this.$5.bumpCounter(m+".failure");return!0}return!1};c.$29=function(){if(this.$14!=null)return!1;var a=this.$28();!this.$13&&a&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$24("LPActive"),this.$26());this.$13&&!a&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$24("LPInactive"),this.$26());return a};c.$30=function(){if(this.$22){this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API");return new(b("MqttFetchClient"))()}else{this.$5.debugTrace("LongPollingRunner","Creating regular Polling client");return new(b("MqttLongPollingClient"))()}};c.$31=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$24("LPActive"),this.$26(),g.configWrite(n,o),this.$25("ReceivingData")};c.$32=function(a){var b=a.map(function(a){return a.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+b);for(var b=0;b<a.length;b++){var c=a[b];this.$19.onPollResponse(c.topic);this.$8(c.topic,c.payload,c.qos)}};c.$33=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$25("NotSent")};c.$34=function(a){this.$19.onPollRequestFailed(a),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$27(),this.$25("NotSent")};return a}();e.exports=a}),null);